(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{17285:function(e,s,a){Promise.resolve().then(a.bind(a,51193))},51193:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return ej}});var t=a(27573),l=a(7653),n=a(31988),r=a(23727),i=a(51733),c=a(36673),d=a(12439),o=a(99134),x=a(25796),m=a(57124),u=a(72196),h=a(50466),g=a(38941),p=a(27751),j=a(77930),N=a(15969),b=a(30609),y=a(93704),f=a(38529),v=a(97066),w=a(27126),_=a(73794),C=a(24875),S=a(29324),Z=a(39134),z=a(93125),k=a(4299),P=a(45249);let T=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsxs)(k.fC,{ref:s,className:(0,P.cn)("relative flex w-full touch-none select-none items-center",a),...l,children:[(0,t.jsx)(k.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-slate-100",children:(0,t.jsx)(k.e6,{className:"absolute h-full bg-slate-900"})}),(0,t.jsx)(k.bU,{className:"block h-5 w-5 rounded-full border-2 border-slate-900 bg-white ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});T.displayName=k.fC.displayName;var F=a(75661),L=a(33154),M=a(41493);let D={categorizeSingle:async(e,s)=>M.hi.post(M.Pn.tax.categorize,{transaction_id:e,...s}),categorizeBulk:async e=>M.hi.post(M.Pn.tax.bulkCategorize,e),getTaxSummary:async e=>M.hi.get(M.Pn.tax.summary,e),getTaxCategories:async()=>M.hi.get(M.Pn.tax.categories),getChartOfAccounts:async()=>M.hi.get(M.Pn.chartOfAccounts.list),downloadScheduleC:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv";return M.hi.download("".concat(M.Pn.tax.summary,"/schedule-c/").concat(e,"?format=").concat(s),"schedule-c-".concat(e,".").concat(s))}};var A=a(81629);function q(e){let{isOpen:s,onClose:a,transaction:i,onTransactionUpdated:d}=e,m=(0,j.NL)(),[u,p]=l.useState(""),[k,M]=l.useState(100),[q,U]=l.useState(""),[E,I]=l.useState(""),[R,B]=l.useState(0),[K,V]=l.useState(""),[O,Q]=l.useState({}),{data:Y=[],isLoading:G}=(0,n.a)({queryKey:["tax-categories"],queryFn:D.getTaxCategories}),W=l.useMemo(()=>K?Y.filter(e=>e.name.toLowerCase().includes(K.toLowerCase())||e.schedule_c_line.toLowerCase().includes(K.toLowerCase())||e.description.toLowerCase().includes(K.toLowerCase())):Y,[Y,K]),H=l.useMemo(()=>Y.find(e=>e.id===u),[Y,u]),J=(0,N.D)({mutationFn:e=>D.categorizeSingle(i.id,e),onSuccess:e=>{d({...i,tax_categorization:e}),m.invalidateQueries({queryKey:["transactions"]}),m.invalidateQueries({queryKey:["tax-summary"]}),a()},onError:e=>{Q({submit:e.message||"Failed to categorize transaction"})}});l.useEffect(()=>{s&&(p(""),M(100),U(""),I(""),B(0),V(""),Q({}))},[s]),l.useEffect(()=>{var e,s;let a;if(!i||0===Y.length)return;let t=(null===(e=i.description)||void 0===e?void 0:e.toLowerCase())||"",l=(null===(s=i.merchant_name)||void 0===s?void 0:s.toLowerCase())||"",n="".concat(t," ").concat(l).toLowerCase();n.includes("uber")||n.includes("lyft")||n.includes("taxi")?a=Y.find(e=>e.is_vehicle_expense):n.includes("restaurant")||n.includes("cafe")||n.includes("food")?a=Y.find(e=>e.is_meals_50_percent):n.includes("office")||n.includes("supplies")?a=Y.find(e=>e.name.toLowerCase().includes("supplies")):(n.includes("internet")||n.includes("phone")||n.includes("software"))&&(a=Y.find(e=>e.name.toLowerCase().includes("utilities")||e.name.toLowerCase().includes("software"))),a&&!u&&(p(a.id),a.is_meals_50_percent&&M(50))},[i,Y,u]);let $=()=>{let e={};return u||(e.category="Please select a tax category"),(null==H?void 0:H.requires_receipt)&&!E.trim()&&(e.receipt="Receipt is required for this category"),(null==H?void 0:H.is_vehicle_expense)&&R<=0&&(e.mileage="Mileage is required for vehicle expenses"),q.trim()||(e.businessPurpose="Business purpose is required"),(k<1||k>100)&&(e.businessUse="Business use percentage must be between 1% and 100%"),Q(e),0===Object.keys(e).length},X=async()=>{if(!$())return;let e={tax_category_id:u,business_use_percentage:k,business_purpose:q.trim()||void 0,receipt_url:E.trim()||void 0,mileage:(null==H?void 0:H.is_vehicle_expense)?R:void 0};J.mutate(e)},ee=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e)),es=()=>{if(!H)return 0;let e=Math.abs(i.amount);return e=k/100*e,H.is_meals_50_percent&&(e*=.5),e};return s?(0,t.jsx)(S.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(S.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(S.fK,{children:[(0,t.jsxs)(S.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5"}),"Tax Categorization"]}),(0,t.jsx)(S.Be,{children:"Categorize this transaction for tax purposes and business expense tracking."})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[O.submit&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[(0,t.jsx)(b.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:O.submit})]}),(0,t.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:i.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4"}),(0,A.WU)(new Date(i.date),"MMM d, yyyy")]}),i.merchant_name&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4"}),i.merchant_name]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:(0,P.cn)("text-lg font-bold",i.amount<0?"text-red-600":"text-green-600"),children:[i.amount<0?"-":"+",ee(i.amount)]}),H&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Deductible: ",ee(es())]})]})]})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(z._,{htmlFor:"category-search",children:"Tax Category"}),(0,t.jsx)(Z.I,{id:"category-search",placeholder:"Search tax categories...",value:K,onChange:e=>V(e.target.value),className:O.category?"border-red-500":""}),O.category&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:O.category})]}),(0,t.jsx)(L.x,{className:"h-48 border rounded-lg",children:(0,t.jsx)("div",{className:"p-2 space-y-1",children:G?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-blue-600"})}):0===W.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:K?"No categories found":"No tax categories available"}):W.map(e=>(0,t.jsxs)("button",{onClick:()=>p(e.id),className:(0,P.cn)("w-full flex items-start gap-3 p-3 rounded-lg border text-left transition-colors hover:bg-gray-50",u===e.id?"border-blue-500 bg-blue-50":"border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)(g.C,{variant:"outline",className:"text-xs",children:["Line ",e.schedule_c_line]}),e.is_meals_50_percent&&(0,t.jsx)(g.C,{variant:"secondary",className:"text-xs",children:"50% Deductible"}),e.requires_receipt&&(0,t.jsx)(y.Z,{className:"h-4 w-4 text-orange-500"}),e.is_vehicle_expense&&(0,t.jsx)(f.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),u===e.id&&(0,t.jsx)(v.Z,{className:"h-5 w-5 text-blue-600 flex-shrink-0"})]},e.id))})}),H&&(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsxs)("h4",{className:"font-medium text-blue-900 flex items-center gap-2",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),"Category Details: ",H.name]}),H.has_business_use_percentage&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z._,{className:"flex items-center gap-2",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4"}),"Business Use Percentage: ",k,"%"]}),(0,t.jsx)(T,{value:[k],onValueChange:e=>M(e[0]),max:100,min:1,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,t.jsx)("span",{children:"1%"}),(0,t.jsx)("span",{children:"100%"})]}),O.businessUse&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:O.businessUse})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z._,{htmlFor:"business-purpose",className:"flex items-center gap-2",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4"}),"Business Purpose *"]}),(0,t.jsx)(Z.I,{id:"business-purpose",placeholder:"Describe the business purpose of this expense...",value:q,onChange:e=>U(e.target.value),className:O.businessPurpose?"border-red-500":""}),O.businessPurpose&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:O.businessPurpose})]}),H.requires_receipt&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z._,{htmlFor:"receipt-url",className:"flex items-center gap-2",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),"Receipt URL *",(0,t.jsxs)(F.u,{children:[(0,t.jsx)(F.aJ,{asChild:!0,children:(0,t.jsx)(w.Z,{className:"h-4 w-4 text-gray-400 cursor-help"})}),(0,t.jsx)(F._v,{children:(0,t.jsx)("p",{children:"Upload your receipt to cloud storage and paste the link here"})})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(Z.I,{id:"receipt-url",placeholder:"https://...",value:E,onChange:e=>I(e.target.value),className:(0,P.cn)("flex-1",O.receipt?"border-red-500":"")}),E&&(0,t.jsx)(h.z,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(E,"_blank"),children:(0,t.jsx)(C.Z,{className:"h-4 w-4"})})]}),O.receipt&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:O.receipt})]}),H.is_vehicle_expense&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z._,{htmlFor:"mileage",className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),"Business Miles *"]}),(0,t.jsx)(Z.I,{id:"mileage",type:"number",placeholder:"0",value:R||"",onChange:e=>B(parseInt(e.target.value)||0),min:"0",className:O.mileage?"border-red-500":""}),O.mileage&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:O.mileage}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Standard mileage rate for business use is typically deductible"})]}),H.is_meals_50_percent&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Business meals are generally 50% deductible. The calculation has been adjusted automatically."})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-blue-200 rounded",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"Estimated Deductible Amount:"}),(0,t.jsx)("span",{className:"text-lg font-bold text-green-600",children:ee(es())})]})]})]}),(0,t.jsxs)(S.cN,{children:[(0,t.jsx)(h.z,{variant:"outline",onClick:a,children:"Cancel"}),(0,t.jsx)(h.z,{onClick:X,disabled:!u||J.isPending,children:J.isPending?"Categorizing...":"Apply Tax Category"})]})]})}):null}var U=a(83989),E=a(83025),I=a(22927);function R(e){let{isOpen:s,onClose:a,transactions:r,onTransactionsUpdated:i}=e,d=(0,j.NL)(),[x,m]=l.useState(""),[u,p]=l.useState(100),[k,M]=l.useState(""),[q,R]=l.useState(""),[B,K]=l.useState(0),[V,O]=l.useState(""),[Q,Y]=l.useState("select"),[G,W]=l.useState(0),[H,J]=l.useState(0),[$,X]=l.useState([]),[ee,es]=l.useState({}),{data:ea=[],isLoading:et}=(0,n.a)({queryKey:["tax-categories"],queryFn:D.getTaxCategories}),el=l.useMemo(()=>V?ea.filter(e=>e.name.toLowerCase().includes(V.toLowerCase())||e.schedule_c_line.toLowerCase().includes(V.toLowerCase())||e.description.toLowerCase().includes(V.toLowerCase())):ea,[ea,V]),en=l.useMemo(()=>ea.find(e=>e.id===x),[ea,x]),er=(0,N.D)({mutationFn:async e=>{Y("processing"),W(0),J(0),X([]);let s=[];for(let a=0;a<e.transaction_ids.length;a+=10)s.push(e.transaction_ids.slice(a,a+10));let a=[],t=[];for(let l=0;l<s.length;l++)try{let t={...e,transaction_ids:s[l]},n=await D.categorizeBulk(t);a.push(...n),J(e=>e+s[l].length),W((l+1)/s.length*100)}catch(e){t.push("Batch ".concat(l+1,": ").concat(e.message))}return t.length>0&&X(t),a},onSuccess:e=>{i(r.map(s=>{let a=e.find(e=>e.transaction_id===s.id);return a?{...s,tax_categorization:a}:s})),d.invalidateQueries({queryKey:["transactions"]}),d.invalidateQueries({queryKey:["tax-summary"]}),Y("complete")},onError:e=>{X([e.message||"Failed to categorize transactions"]),Y("select")}});l.useEffect(()=>{s&&(m(""),p(100),M(""),R(""),K(0),O(""),Y("select"),W(0),J(0),X([]),es({}))},[s]);let ei=()=>{let e={};return x||(e.category="Please select a tax category"),(null==en?void 0:en.requires_receipt)&&!q.trim()&&(e.receipt="Receipt is required for this category"),(null==en?void 0:en.is_vehicle_expense)&&B<=0&&(e.mileage="Mileage is required for vehicle expenses"),k.trim()||(e.businessPurpose="Business purpose is required"),(u<1||u>100)&&(e.businessUse="Business use percentage must be between 1% and 100%"),es(e),0===Object.keys(e).length},ec=async()=>{if(!ei())return;let e={transaction_ids:r.map(e=>e.id),tax_category_id:x,business_use_percentage:u,business_purpose:k.trim()||void 0,receipt_url:q.trim()||void 0,mileage:(null==en?void 0:en.is_vehicle_expense)?B:void 0};er.mutate(e)},ed=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e)),eo=r.reduce((e,s)=>e+Math.abs(s.amount),0),ex=()=>{if(!en)return 0;let e=eo;return e=u/100*e,en.is_meals_50_percent&&(e*=.5),e},em=()=>{"processing"!==Q&&a()};return s?(0,t.jsx)(S.Vq,{open:s,onOpenChange:em,children:(0,t.jsxs)(S.cZ,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(S.fK,{children:[(0,t.jsxs)(S.$N,{className:"flex items-center gap-2",children:[(0,t.jsx)(U.Z,{className:"h-5 w-5"}),"Bulk Tax Categorization"]}),(0,t.jsxs)(S.Be,{children:["Apply the same tax category to ",r.length," selected transactions."]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[$.length>0&&(0,t.jsx)("div",{className:"space-y-2",children:$.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[(0,t.jsx)(b.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:e})]},s))}),"select"===Q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5"}),r.length," Selected Transactions"]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["Total: ",ed(eo)]}),en&&(0,t.jsxs)("p",{className:"text-sm text-green-600",children:["Deductible: ",ed(ex())]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Sample transactions:"}),r.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-white border rounded p-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:e.description}),(0,t.jsx)("p",{className:"text-gray-600",children:(0,A.WU)(new Date(e.date),"MMM d, yyyy")})]}),(0,t.jsx)("p",{className:"font-medium",children:ed(e.amount)})]},e.id)),r.length>3&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 text-center",children:["... and ",r.length-3," more transactions"]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(z._,{htmlFor:"category-search",children:"Tax Category"}),(0,t.jsx)(Z.I,{id:"category-search",placeholder:"Search tax categories...",value:V,onChange:e=>O(e.target.value),className:ee.category?"border-red-500":""}),ee.category&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:ee.category})]}),(0,t.jsx)(L.x,{className:"h-48 border rounded-lg",children:(0,t.jsx)("div",{className:"p-2 space-y-1",children:et?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-blue-600"})}):0===el.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:V?"No categories found":"No tax categories available"}):el.map(e=>(0,t.jsxs)("button",{onClick:()=>m(e.id),className:(0,P.cn)("w-full flex items-start gap-3 p-3 rounded-lg border text-left transition-colors hover:bg-gray-50",x===e.id?"border-blue-500 bg-blue-50":"border-gray-200"),children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)(g.C,{variant:"outline",className:"text-xs",children:["Line ",e.schedule_c_line]}),e.is_meals_50_percent&&(0,t.jsx)(g.C,{variant:"secondary",className:"text-xs",children:"50% Deductible"}),e.requires_receipt&&(0,t.jsx)(y.Z,{className:"h-4 w-4 text-orange-500"}),e.is_vehicle_expense&&(0,t.jsx)(f.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),x===e.id&&(0,t.jsx)(v.Z,{className:"h-5 w-5 text-blue-600 flex-shrink-0"})]},e.id))})}),en&&(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,t.jsxs)("h4",{className:"font-medium text-blue-900 flex items-center gap-2",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),"Category Details: ",en.name]}),en.has_business_use_percentage&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z._,{className:"flex items-center gap-2",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4"}),"Business Use Percentage: ",u,"%"]}),(0,t.jsx)(T,{value:[u],onValueChange:e=>p(e[0]),max:100,min:1,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,t.jsx)("span",{children:"1%"}),(0,t.jsx)("span",{children:"100%"})]}),ee.businessUse&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:ee.businessUse})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z._,{htmlFor:"business-purpose",className:"flex items-center gap-2",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4"}),"Business Purpose *"]}),(0,t.jsx)(Z.I,{id:"business-purpose",placeholder:"Describe the business purpose of these expenses...",value:k,onChange:e=>M(e.target.value),className:ee.businessPurpose?"border-red-500":""}),ee.businessPurpose&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:ee.businessPurpose})]}),en.requires_receipt&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z._,{htmlFor:"receipt-url",className:"flex items-center gap-2",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4"}),"Receipt URL *",(0,t.jsxs)(F.u,{children:[(0,t.jsx)(F.aJ,{asChild:!0,children:(0,t.jsx)(w.Z,{className:"h-4 w-4 text-gray-400 cursor-help"})}),(0,t.jsx)(F._v,{children:(0,t.jsx)("p",{children:"For bulk operations, provide a general receipt or folder link"})})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(Z.I,{id:"receipt-url",placeholder:"https://...",value:q,onChange:e=>R(e.target.value),className:(0,P.cn)("flex-1",ee.receipt?"border-red-500":"")}),q&&(0,t.jsx)(h.z,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(q,"_blank"),children:(0,t.jsx)(C.Z,{className:"h-4 w-4"})})]}),ee.receipt&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:ee.receipt})]}),en.is_vehicle_expense&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(z._,{htmlFor:"mileage",className:"flex items-center gap-2",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),"Total Business Miles *"]}),(0,t.jsx)(Z.I,{id:"mileage",type:"number",placeholder:"0",value:B||"",onChange:e=>K(parseInt(e.target.value)||0),min:"0",className:ee.mileage?"border-red-500":""}),ee.mileage&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:ee.mileage}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Total business miles for all selected vehicle expenses"})]}),en.is_meals_50_percent&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:[(0,t.jsx)(w.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Business meals are generally 50% deductible. The calculation has been adjusted automatically."})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border border-blue-200 rounded",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:"Estimated Total Deductible Amount:"}),(0,t.jsx)("span",{className:"text-lg font-bold text-green-600",children:ed(ex())})]})]})]}),"processing"===Q&&(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(E.Z,{className:"h-8 w-8 animate-spin"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Processing Transactions"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["Applying tax categorization to ",r.length," transactions..."]}),(0,t.jsx)(I.E,{value:G,className:"w-full"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[H," of ",r.length," transactions processed"]})]})]}),"complete"===Q&&(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(v.Z,{className:"h-16 w-16 text-green-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-green-900",children:"Categorization Complete"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Successfully categorized ",H," transactions for tax purposes."]}),$.length>0&&(0,t.jsxs)("p",{className:"text-orange-600 text-sm",children:[$.length," batch(es) encountered errors. Some transactions may need manual review."]})]})]})]}),(0,t.jsxs)(S.cN,{children:["select"===Q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.z,{variant:"outline",onClick:em,children:"Cancel"}),(0,t.jsxs)(h.z,{onClick:ec,disabled:!x||er.isPending,children:["Apply to ",r.length," Transactions"]})]}),"processing"===Q&&(0,t.jsx)(h.z,{disabled:!0,children:"Processing..."}),"complete"===Q&&(0,t.jsx)(h.z,{onClick:em,children:"Done"})]})]})}):null}var B=a(20054),K=a(18177),V=a(38333),O=a(85745);function Q(e){let{className:s}=e,a=new Date().getFullYear(),[o,x]=l.useState(a),[p,j]=l.useState(""),[N,b]=l.useState({csv:!1,pdf:!1}),{data:f,isLoading:w,error:_}=(0,n.a)({queryKey:["tax-summary",o],queryFn:()=>D.getTaxSummary(o),enabled:!!o}),C=l.useMemo(()=>{let e=[];for(let s=0;s<5;s++)e.push(a-s);return e},[a]),S=l.useMemo(()=>(null==f?void 0:f.categories)?p?f.categories.filter(e=>e.category_name.toLowerCase().includes(p.toLowerCase())||e.schedule_c_line.toLowerCase().includes(p.toLowerCase())):f.categories:[],[null==f?void 0:f.categories,p]),z=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),k=e=>{switch(e){case"complete":return"text-green-600 bg-green-50 border-green-200";case"partial":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"missing":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},T=e=>{switch(e){case"complete":return(0,t.jsx)(v.Z,{className:"h-4 w-4"});case"partial":return(0,t.jsx)(B.Z,{className:"h-4 w-4"});default:return(0,t.jsx)(c.Z,{className:"h-4 w-4"})}},M=async e=>{try{b(s=>({...s,[e]:!0})),await D.downloadScheduleC(o,e)}catch(e){console.error("Export failed:",e)}finally{b(s=>({...s,[e]:!1}))}};return _?(0,t.jsx)(u.Zb,{className:(0,P.cn)("p-6",s),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(B.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Tax Summary"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Unable to load tax summary for ",o,". Please try again later."]})]})}):(0,t.jsxs)("div",{className:(0,P.cn)("space-y-6",s),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Tax Summary"}),(0,t.jsxs)(O.Ph,{value:o.toString(),onValueChange:e=>x(parseInt(e)),children:[(0,t.jsx)("option",{value:"",children:"Select Year"}),C.map(e=>(0,t.jsx)("option",{value:e.toString(),children:e},e))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>M("csv"),disabled:!f||N.csv,children:[N.csv?(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-gray-600"}):(0,t.jsx)(i.Z,{className:"h-4 w-4"}),"Export CSV"]}),(0,t.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>M("pdf"),disabled:!f||N.pdf,children:[N.pdf?(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-gray-600"}):(0,t.jsx)(i.Z,{className:"h-4 w-4"}),"Export PDF"]})]})]}),w?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)(u.Zb,{className:"p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]},s))}):f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(K.Z,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Total Deductions"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:z(f.total_deductions)})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(c.Z,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Categories"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:f.categories.length})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(y.Z,{className:"h-5 w-5 text-orange-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Transactions"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:f.documentation_status.total_transactions})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(v.Z,{className:"h-5 w-5 text-purple-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Documentation"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[(()=>{if(!(null==f?void 0:f.documentation_status))return 0;let{total_transactions:e,with_receipts:s,complete_business_purpose:a}=f.documentation_status;return 0===e?100:Math.round(s/e*50+a/e*50)})(),"%"]}),(0,t.jsxs)(F.u,{children:[(0,t.jsx)(F.aJ,{asChild:!0,children:(0,t.jsx)(B.Z,{className:"h-4 w-4 text-gray-400 cursor-help"})}),(0,t.jsx)(F._v,{children:(0,t.jsx)("p",{children:"Percentage of transactions with complete receipts and business purpose"})})]})]})]})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(y.Z,{className:"h-5 w-5"}),"Documentation Status"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Receipt Documentation"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"With Receipts"}),(0,t.jsx)("span",{children:f.documentation_status.with_receipts})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Missing Receipts"}),(0,t.jsx)("span",{className:"text-red-600",children:f.documentation_status.missing_receipts})]}),(0,t.jsx)(I.E,{value:f.documentation_status.with_receipts/f.documentation_status.total_transactions*100,className:"h-2"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Business Purpose"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Complete"}),(0,t.jsx)("span",{children:f.documentation_status.complete_business_purpose})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Missing"}),(0,t.jsx)("span",{className:"text-red-600",children:f.documentation_status.missing_business_purpose})]}),(0,t.jsx)(I.E,{value:f.documentation_status.complete_business_purpose/f.documentation_status.total_transactions*100,className:"h-2"})]})]})]})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5"}),"Deductions by Category"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)(Z.I,{placeholder:"Filter categories...",value:p,onChange:e=>j(e.target.value),className:"w-48"})]})]}),(0,t.jsx)(L.x,{className:"max-h-96",children:(0,t.jsx)("div",{className:"space-y-3",children:0===S.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:p?"No categories match your filter":"No categorized transactions found"}):S.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.category_name}),(0,t.jsxs)(g.C,{variant:"outline",className:"text-xs",children:["Line ",e.schedule_c_line]}),(0,t.jsxs)("div",{className:(0,P.cn)("flex items-center gap-1 px-2 py-1 rounded text-xs border",k(e.documentation_status)),children:[T(e.documentation_status),(0,t.jsx)("span",{className:"capitalize",children:e.documentation_status})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:(0,t.jsxs)("span",{children:[e.transaction_count," transactions"]})})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900",children:z(e.total_amount)}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,t.jsxs)(h.z,{variant:"ghost",size:"sm",className:"text-xs",children:[(0,t.jsx)(V.Z,{className:"h-3 w-3 mr-1"}),"View Details"]})})]})]},e.tax_category_id))})})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(h.z,{variant:"outline",className:"h-auto p-4 text-left",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:"Review Missing Receipts"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[f.documentation_status.missing_receipts," transactions need receipts"]})]})}),(0,t.jsx)(h.z,{variant:"outline",className:"h-auto p-4 text-left",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:"Complete Business Purpose"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[f.documentation_status.missing_business_purpose," transactions need descriptions"]})]})}),(0,t.jsx)(h.z,{variant:"outline",className:"h-auto p-4 text-left",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:"Generate Schedule C"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Export data for tax filing"})]})})]})]})]}):(0,t.jsxs)(u.Zb,{className:"p-12 text-center",children:[(0,t.jsx)(r.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Tax Data"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["No tax categorization data found for ",o,". Start categorizing transactions to see your tax summary."]})]})]})}var Y=a(25223),G=a(32026),W=a(38983),H=a(2966),J=a(70844),$=a(34915),X=a(10997),ee=a(3172),es=a(95731),ea=a(88648);let et=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(ea.fC,{className:(0,P.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-slate-900 data-[state=unchecked]:bg-slate-200",a),...l,ref:s,children:(0,t.jsx)(ea.bU,{className:(0,P.cn)("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});function el(e){let{className:s}=e;(0,j.NL)();let[a,r]=l.useState(""),[i,c]=l.useState(""),[o,p]=l.useState(!1),[N,b]=l.useState(new Set),[y,f]=l.useState(!1),[v,w]=l.useState(null),[_,C]=l.useState({name:"",account_type:"asset",parent_id:"",is_active:!0}),[k,T]=l.useState({}),{data:F=[],isLoading:M,error:A}=(0,n.a)({queryKey:["chart-of-accounts"],queryFn:D.getChartOfAccounts}),q=l.useMemo(()=>{let e=function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return s.filter(e=>e.parent_id===a).map(a=>({...a,level:t,children:e(s,a.id,t+1)})).sort((e,s)=>e.name.localeCompare(s.name))};return e(F)},[F]),U=l.useMemo(()=>{let e=s=>{let t=!a||s.name.toLowerCase().includes(a.toLowerCase())||s.account_type.toLowerCase().includes(a.toLowerCase()),l=!i||s.account_type===i,n=o||s.is_active,r=s.children.map(s=>e(s)).filter(Boolean);return t&&l&&n||r.length>0?{...s,children:r}:null};return q.map(s=>e(s)).filter(Boolean)},[q,a,i,o]),E={asset:(0,t.jsx)(Y.Z,{className:"h-4 w-4 text-green-600"}),liability:(0,t.jsx)(G.Z,{className:"h-4 w-4 text-red-600"}),equity:(0,t.jsx)(x.Z,{className:"h-4 w-4 text-blue-600"}),income:(0,t.jsx)(d.Z,{className:"h-4 w-4 text-emerald-600"}),expense:(0,t.jsx)(K.Z,{className:"h-4 w-4 text-orange-600"})},I={asset:"text-green-600 bg-green-50 border-green-200",liability:"text-red-600 bg-red-50 border-red-200",equity:"text-blue-600 bg-blue-50 border-blue-200",income:"text-emerald-600 bg-emerald-50 border-emerald-200",expense:"text-orange-600 bg-orange-50 border-orange-200"},R=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),B=e=>{b(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})},V=e=>{C({name:e.name,account_type:e.account_type,parent_id:e.parent_id||"",is_active:e.is_active}),T({}),w(e),f(!0)},O=e=>{let s=e.children.length>0,a=N.has(e.id),l=24*e.level;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:(0,P.cn)("flex items-center gap-2 p-3 border-b border-gray-100 hover:bg-gray-50 transition-colors",!e.is_active&&"opacity-50"),style:{paddingLeft:"".concat(l+12,"px")},children:[s?(0,t.jsx)("button",{onClick:()=>B(e.id),className:"p-1 hover:bg-gray-200 rounded",children:a?(0,t.jsx)(W.Z,{className:"h-4 w-4"}):(0,t.jsx)(H.Z,{className:"h-4 w-4"})}):(0,t.jsx)("div",{className:"w-6"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[E[e.account_type],(0,t.jsx)("span",{className:(0,P.cn)("font-medium",!e.is_active&&"text-gray-500"),children:e.name}),!e.is_active&&(0,t.jsx)(J.Z,{className:"h-4 w-4 text-gray-400"})]}),(0,t.jsx)(g.C,{variant:"outline",className:(0,P.cn)("text-xs capitalize",I[e.account_type]),children:e.account_type}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,t.jsx)("span",{className:(0,P.cn)("font-medium",e.balance>=0?"text-green-600":"text-red-600"),children:R(e.balance)}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>V(e),className:"h-8 w-8 p-0",children:(0,t.jsx)($.Z,{className:"h-3 w-3"})}),(0,t.jsx)(h.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:(0,t.jsx)(X.Z,{className:"h-3 w-3"})})]})]})]}),s&&a&&(0,t.jsx)("div",{children:e.children.map(e=>O(e))})]},e.id)},Q=l.useMemo(()=>{let e={asset:0,liability:0,equity:0,income:0,expense:0};return F.forEach(s=>{s.is_active&&(e[s.account_type]+=s.balance)}),e},[F]);return A?(0,t.jsx)(u.Zb,{className:(0,P.cn)("p-6",s),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(x.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Chart of Accounts"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Unable to load chart of accounts. Please try again later."})]})}):(0,t.jsxs)("div",{className:(0,P.cn)("space-y-6",s),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Chart of Accounts"}),(0,t.jsxs)(h.z,{onClick:()=>{C({name:"",account_type:"asset",parent_id:"",is_active:!0}),T({}),w(null),f(!0)},children:[(0,t.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"Add Account"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(Q).map(e=>{let[s,a]=e;return(0,t.jsxs)(u.Zb,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[E[s],(0,t.jsx)("h3",{className:"font-medium text-gray-700 capitalize",children:s})]}),(0,t.jsx)("p",{className:(0,P.cn)("text-lg font-bold",a>=0?"text-green-600":"text-red-600"),children:R(a)})]},s)})}),(0,t.jsx)(u.Zb,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(es.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)(Z.I,{placeholder:"Search accounts...",value:a,onChange:e=>r(e.target.value),className:"w-64"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("select",{value:i,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"asset",children:"Assets"}),(0,t.jsx)("option",{value:"liability",children:"Liabilities"}),(0,t.jsx)("option",{value:"equity",children:"Equity"}),(0,t.jsx)("option",{value:"income",children:"Income"}),(0,t.jsx)("option",{value:"expense",children:"Expenses"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(et,{checked:o,onCheckedChange:p}),(0,t.jsx)(z._,{className:"text-sm",children:"Show inactive accounts"})]}),(0,t.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>{let e=new Set,s=a=>{a.forEach(a=>{a.children.length>0&&(e.add(a.id),s(a.children))})};s(U),b(e)},children:"Expand All"}),(0,t.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>b(new Set),children:"Collapse All"})]})}),(0,t.jsxs)(u.Zb,{children:[(0,t.jsx)("div",{className:"border-b border-gray-200 p-4",children:(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Accounts"})}),M?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading accounts..."})]}):0===U.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:a||i?"No accounts match your filters":"No accounts found"}):(0,t.jsx)(L.x,{className:"max-h-96",children:(0,t.jsx)("div",{children:U.map(e=>O(e))})})]}),(0,t.jsx)(S.Vq,{open:y,onOpenChange:f,children:(0,t.jsxs)(S.cZ,{children:[(0,t.jsxs)(S.fK,{children:[(0,t.jsx)(S.$N,{children:v?"Edit Account":"Create New Account"}),(0,t.jsx)(S.Be,{children:v?"Update the account details below.":"Add a new account to your chart of accounts."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"account-name",children:"Account Name *"}),(0,t.jsx)(Z.I,{id:"account-name",value:_.name,onChange:e=>C(s=>({...s,name:e.target.value})),placeholder:"Enter account name",className:k.name?"border-red-500":""}),k.name&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:k.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"account-type",children:"Account Type *"}),(0,t.jsxs)("select",{id:"account-type",value:_.account_type,onChange:e=>C(s=>({...s,account_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,t.jsx)("option",{value:"asset",children:"Asset"}),(0,t.jsx)("option",{value:"liability",children:"Liability"}),(0,t.jsx)("option",{value:"equity",children:"Equity"}),(0,t.jsx)("option",{value:"income",children:"Income"}),(0,t.jsx)("option",{value:"expense",children:"Expense"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(z._,{htmlFor:"parent-account",children:"Parent Account (Optional)"}),(0,t.jsxs)("select",{id:"parent-account",value:_.parent_id,onChange:e=>C(s=>({...s,parent_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,t.jsx)("option",{value:"",children:"No Parent (Top Level)"}),F.filter(e=>e.id!==(null==v?void 0:v.id)).map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.account_type,")"]},e.id))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(et,{checked:_.is_active,onCheckedChange:e=>C(s=>({...s,is_active:e}))}),(0,t.jsx)(z._,{children:"Active Account"})]})]}),(0,t.jsxs)(S.cN,{children:[(0,t.jsx)(h.z,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,t.jsx)(h.z,{onClick:()=>{f(!1)},children:v?"Update Account":"Create Account"})]})]})})]})}et.displayName=ea.fC.displayName;var en=a(21746),er=a(31815),ei=a(69790),ec=a(59051),ed=a(58912),eo=a(26492),ex=a(34965),em=a(50520);function eu(e){var s;let{columns:a,data:n,searchPlaceholder:r="Filter...",onRowSelectionChange:i,enableRowSelection:c=!1,enableSorting:d=!0,enableFiltering:o=!0,enablePagination:x=!0,pageSize:m=10,className:u,emptyMessage:g="No results.",loading:p=!1}=e,[j,N]=l.useState([]),[b,y]=l.useState([]),[f,v]=l.useState({}),[w,_]=l.useState({}),[C,S]=l.useState(""),Z=l.useMemo(()=>c?[{id:"select",header:e=>{let{table:s}=e;return(0,t.jsx)(em.X,{checked:s.getIsAllPageRowsSelected(),onChange:e=>s.toggleAllPageRowsSelected(e.target.checked),"aria-label":"Select all"})},cell:e=>{let{row:s}=e;return(0,t.jsx)(em.X,{checked:s.getIsSelected(),onChange:e=>s.toggleSelected(e.target.checked),"aria-label":"Select row"})},enableSorting:!1,enableHiding:!1},...a]:a,[a,c]),z=(0,ed.b7)({data:n,columns:Z,getCoreRowModel:(0,eo.sC)(),getPaginationRowModel:x?(0,eo.G_)():void 0,getSortedRowModel:d?(0,eo.tj)():void 0,getFilteredRowModel:o?(0,eo.vL)():void 0,onSortingChange:d?N:void 0,onColumnFiltersChange:o?y:void 0,onColumnVisibilityChange:v,onRowSelectionChange:_,onGlobalFilterChange:o?S:void 0,globalFilterFn:"includesString",state:{sorting:d?j:void 0,columnFilters:o?b:void 0,columnVisibility:f,rowSelection:c?w:void 0,globalFilter:o?C:void 0},initialState:{pagination:{pageSize:m}}});return l.useEffect(()=>{c&&i&&i(z.getSelectedRowModel().rows.map(e=>e.original))},[w,c,i,z]),(0,t.jsxs)("div",{className:(0,P.cn)("space-y-4",u),children:[o&&(0,t.jsx)("div",{className:"flex items-center py-4",children:(0,t.jsx)("input",{placeholder:r,value:C,onChange:e=>S(e.target.value),className:"max-w-sm px-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:z.getHeaderGroups().map(e=>(0,t.jsx)("tr",{className:"border-b bg-neutral-50",children:e.headers.map(e=>(0,t.jsx)("th",{className:"px-4 py-3 text-left font-medium text-neutral-900",children:e.isPlaceholder?null:(0,t.jsxs)("div",{className:(0,P.cn)("flex items-center gap-2",d&&e.column.getCanSort()&&"cursor-pointer select-none"),onClick:d?e.column.getToggleSortingHandler():void 0,children:[(0,ed.ie)(e.column.columnDef.header,e.getContext()),d&&e.column.getCanSort()&&(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(ex.Z,{className:(0,P.cn)("h-3 w-3","asc"===e.column.getIsSorted()?"text-primary-600":"text-neutral-400")}),(0,t.jsx)(W.Z,{className:(0,P.cn)("h-3 w-3 -mt-1","desc"===e.column.getIsSorted()?"text-primary-600":"text-neutral-400")})]})]})},e.id))},e.id))}),(0,t.jsx)("tbody",{children:p?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:a.length,className:"px-4 py-8 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-primary-600"}),(0,t.jsx)("span",{className:"ml-2 text-neutral-600",children:"Loading..."})]})})}):(null===(s=z.getRowModel().rows)||void 0===s?void 0:s.length)?z.getRowModel().rows.map(e=>(0,t.jsx)("tr",{className:(0,P.cn)("border-b transition-colors hover:bg-neutral-50",e.getIsSelected()&&"bg-primary-50"),children:e.getVisibleCells().map(e=>(0,t.jsx)("td",{className:"px-4 py-3",children:(0,ed.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:a.length,className:"px-4 py-8 text-center text-neutral-600",children:g})})})]})}),x&&(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-2 py-4",children:[(0,t.jsx)("div",{className:"flex-1 text-sm text-neutral-600",children:c&&(0,t.jsxs)("span",{children:[z.getFilteredSelectedRowModel().rows.length," of"," ",z.getFilteredRowModel().rows.length," row(s) selected."]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>z.previousPage(),disabled:!z.getCanPreviousPage(),children:"Previous"}),(0,t.jsxs)("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",z.getState().pagination.pageIndex+1," of"," ",z.getPageCount()]}),(0,t.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>z.nextPage(),disabled:!z.getCanNextPage(),children:"Next"})]})]})]})}var eh=a(81381);function eg(e){let{transactions:s,accounts:a,categories:n,isLoading:i=!1,onTransactionSelect:d,onTransactionUpdate:m,onTransactionDelete:u,onRowSelectionChange:p,className:j}=e,[N,b]=l.useState([]),[y,f]=l.useState(!1),[w,_]=l.useState(!1),[C,S]=l.useState(null),Z=e=>{let s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e));return e<0?"-".concat(s):s},z=e=>e<0?"text-red-600":"text-green-600",k=e=>a.find(s=>s.id===e),T=async(e,s)=>{try{let a=await en.d.updateTransaction(e.id,{category:s});m(a)}catch(e){console.error("Failed to update transaction category:",e)}},L=async e=>{try{let s=await eh.Y.categorizeTransaction(e.id);if(s.length>0){let a=s[0];a.confidence>.8&&await T(e,a.category_id)}}catch(e){console.error("Failed to ML categorize:",e)}},M=e=>{S(e),f(!0)},D=e=>{let s=e.tax_categorization;if(!s)return"none";let a=!!s.receipt_url,t=!!s.business_purpose;return a&&t?"complete":a||t?"partial":"minimal"},U=e=>{switch(e){case"complete":return"text-green-600 bg-green-50 border-green-200";case"partial":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"minimal":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},E=e=>{switch(e){case"complete":return(0,t.jsx)(v.Z,{className:"h-3 w-3"});case"partial":return(0,t.jsx)(B.Z,{className:"h-3 w-3"});case"minimal":return(0,t.jsx)(o.Z,{className:"h-3 w-3"});default:return(0,t.jsx)(c.Z,{className:"h-3 w-3"})}},I=[{accessorKey:"date",header:"Date",cell:e=>{let{row:s}=e,a=new Date(s.getValue("date"));return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:(0,A.WU)(a,"MMM d")}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(0,A.WU)(a,"yyyy")})]})]})}},{accessorKey:"description",header:"Description",cell:e=>{let{row:s}=e,a=s.original;return(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("button",{onClick:()=>d(a),className:"text-left hover:text-blue-600 transition-colors",children:[(0,t.jsx)("p",{className:"font-medium truncate",children:a.description}),a.merchant_name&&(0,t.jsx)("p",{className:"text-sm text-gray-600 truncate",children:a.merchant_name})]}),(0,t.jsx)("div",{className:"flex items-center gap-1 mt-1",children:a.is_pending&&(0,t.jsx)(g.C,{variant:"outline",className:"text-xs text-yellow-600",children:"Pending"})})]})}},{accessorKey:"category",header:"Category",cell:e=>{let{row:s}=e,a=s.original;if(a.category){let e=n.find(e=>e.name===a.category);return(0,t.jsx)(g.C,{variant:(null==e?void 0:e.type)==="income"?"default":(null==e?void 0:e.type)==="expense"?"destructive":"secondary",className:"text-xs",children:a.category})}return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(O.Ph,{value:"",onValueChange:e=>e&&T(a,e),children:[(0,t.jsx)(O.i4,{className:"w-[180px]",children:(0,t.jsx)(O.ki,{placeholder:"Uncategorized"})}),(0,t.jsxs)(O.Bw,{children:[(0,t.jsx)(O.Ql,{value:"",children:"Select category"}),n.map(e=>(0,t.jsx)(O.Ql,{value:e.name,children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs",children:e.type}),e.name]})},e.name))]})]}),(0,t.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>L(a),className:"h-6 w-6 p-0",title:"AI Categorize",children:(0,t.jsx)(er.Z,{className:"h-3 w-3"})})]})}},{accessorKey:"tax_categorization",header:"Tax Status",cell:e=>{let{row:s}=e,a=s.original,l=D(a),n=a.tax_categorization;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:(0,P.cn)("flex items-center gap-1 px-2 py-1 rounded text-xs border",U(l)),children:[E(l),(0,t.jsx)("span",{className:"capitalize",children:"none"===l?"Not categorized":"minimal"===l?"Basic":"partial"===l?"Partial":"Complete"})]}),n&&(0,t.jsx)(F.u,{content:"Business use: ".concat(n.business_use_percentage,"%"),children:(0,t.jsxs)(g.C,{variant:"outline",className:"text-xs",children:[n.business_use_percentage,"%"]})}),(0,t.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>M(a),className:"h-6 w-6 p-0",title:"Tax Categorize",children:(0,t.jsx)(o.Z,{className:"h-3 w-3"})})]})}},{accessorKey:"amount",header:"Amount",cell:e=>{let{row:s}=e,a=s.getValue("amount"),l=s.original.tax_categorization,n=0;return l&&a<0&&(n=l.business_use_percentage/100*Math.abs(a)),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:(0,P.cn)("font-medium",z(a)),children:Z(a)}),n>0&&(0,t.jsxs)("p",{className:"text-xs text-green-600",children:["Deductible: ",Z(n)]})]})}},{accessorKey:"account_id",header:"Account",cell:e=>{let{row:s}=e,a=k(s.getValue("account_id"));return a?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:a.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:a.subtype})]})]}):null}},{id:"actions",header:"Actions",cell:e=>{let{row:s}=e,a=s.original,[n,r]=l.useState(!1);return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>r(!n),className:"h-8 w-8 p-0",children:(0,t.jsx)(ei.Z,{className:"h-4 w-4"})}),n&&(0,t.jsxs)("div",{className:"absolute right-0 top-8 z-50 w-48 rounded-md border border-gray-200 bg-white py-1 shadow-lg",children:[(0,t.jsxs)("button",{onClick:()=>{d(a),r(!1)},className:"flex w-full items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50",children:[(0,t.jsx)(V.Z,{className:"h-4 w-4"}),"View Details"]}),(0,t.jsxs)("button",{onClick:()=>{M(a),r(!1)},className:"flex w-full items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4"}),"Tax Categorize"]}),(0,t.jsxs)("button",{onClick:()=>{d(a),r(!1)},className:"flex w-full items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50",children:[(0,t.jsx)($.Z,{className:"h-4 w-4"}),"Edit"]}),(0,t.jsxs)("button",{onClick:()=>{L(a),r(!1)},className:"flex w-full items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50",disabled:!!a.category,children:[(0,t.jsx)(er.Z,{className:"h-4 w-4"}),"AI Categorize"]}),(0,t.jsx)("hr",{className:"my-1"}),(0,t.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this transaction?")&&u(a.id),r(!1)},className:"flex w-full items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,t.jsx)(ec.Z,{className:"h-4 w-4"}),"Delete"]})]})]})}}];return(0,t.jsxs)("div",{className:j,children:[N.length>0&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[N.length," transaction(s) selected"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(h.z,{variant:"outline",size:"sm",onClick:()=>{N.length>0&&_(!0)},children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),"Bulk Tax Categorize"]}),(0,t.jsx)(h.z,{variant:"outline",size:"sm",onClick:()=>b([]),children:"Clear Selection"})]})]})}),(0,t.jsx)(eu,{columns:I,data:s,enableRowSelection:!0,enableSorting:!0,enableFiltering:!1,enablePagination:!0,pageSize:25,loading:i,onRowSelectionChange:e=>{b(e),p(e)},searchPlaceholder:"Search transactions...",emptyMessage:"No transactions found. Try adjusting your filters or sync your accounts."}),C&&(0,t.jsx)(q,{isOpen:y,onClose:()=>{f(!1),S(null)},transaction:C,onTransactionUpdated:e=>{m(e),f(!1),S(null)}}),(0,t.jsx)(R,{isOpen:w,onClose:()=>_(!1),transactions:N,onTransactionsUpdated:e=>{e.forEach(e=>{m(e)}),_(!1),b([])}})]})}var ep=a(45118);function ej(){let[e,s]=l.useState("dashboard"),[a,j]=l.useState(new Date().getFullYear()),{data:N=[],isLoading:b}=(0,n.a)({queryKey:["transactions"],queryFn:ep.transactionsApi.getTransactions}),{data:y=[]}=(0,n.a)({queryKey:["accounts"],queryFn:ep.accountsApi.getAccounts}),{data:f=[]}=(0,n.a)({queryKey:["categories"],queryFn:ep.categoriesApi.getCategories}),{data:v}=(0,n.a)({queryKey:["tax-summary",a],queryFn:()=>D.getTaxSummary(a)}),w=l.useMemo(()=>N.filter(e=>new Date(e.date).getFullYear()===a),[N,a]),_=l.useMemo(()=>{let e=w.length,s=w.filter(e=>e.tax_categorization).length,a=w.filter(e=>e.amount<0).reduce((e,s)=>e+Math.abs(s.amount),0),t=(null==v?void 0:v.total_deductions)||0;return{totalTransactions:e,categorizedTransactions:s,categorizationPercentage:e>0?Math.round(s/e*100):0,totalExpenses:a,totalDeductions:t,potentialSavings:.25*t}},[w,v]),C=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Tax Management"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Categorize transactions and manage tax deductions for better financial reporting."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("select",{value:a,onChange:e=>j(parseInt(e.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:(()=>{let e=new Date().getFullYear(),s=[];for(let a=0;a<5;a++)s.push(e-a);return s})().map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)(h.z,{variant:"outline",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Export Tax Data"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(c.Z,{className:"h-5 w-5 text-blue-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Transactions"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:_.totalTransactions}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[_.categorizedTransactions," categorized (",_.categorizationPercentage,"%)"]})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 text-red-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Total Expenses"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:C(_.totalExpenses)}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Business expenses for ",a]})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Tax Deductions"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:C(_.totalDeductions)}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Approved business deductions"})]}),(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(x.Z,{className:"h-5 w-5 text-purple-600"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Potential Savings"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:C(_.potentialSavings)}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Est. tax savings (25% rate)"})]})]}),(0,t.jsxs)(p.mQ,{value:e,onValueChange:s,children:[(0,t.jsxs)(p.dr,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(p.SP,{value:"dashboard",children:"Tax Dashboard"}),(0,t.jsx)(p.SP,{value:"transactions",children:"Categorize Transactions"}),(0,t.jsx)(p.SP,{value:"accounts",children:"Chart of Accounts"}),(0,t.jsx)(p.SP,{value:"reports",children:"Tax Reports"})]}),(0,t.jsx)(p.nU,{value:"dashboard",className:"space-y-6",children:(0,t.jsx)(Q,{})}),(0,t.jsx)(p.nU,{value:"transactions",className:"space-y-6",children:(0,t.jsxs)(u.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Transaction Categorization"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Review and categorize transactions for tax purposes. Focus on business expenses for maximum deductions."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(g.C,{variant:"outline",children:[_.categorizationPercentage,"% Categorized"]}),(0,t.jsxs)(h.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),"Filter Uncategorized"]})]})]}),(0,t.jsx)(eg,{transactions:w,accounts:y,categories:f,isLoading:b,onTransactionSelect:e=>{console.log("Transaction selected:",e)},onTransactionUpdate:e=>{console.log("Transaction updated:",e)},onTransactionDelete:e=>{console.log("Transaction deleted:",e)},onRowSelectionChange:e=>{console.log("Selected transactions:",e)}})]})}),(0,t.jsx)(p.nU,{value:"accounts",className:"space-y-6",children:(0,t.jsx)(el,{})}),(0,t.jsx)(p.nU,{value:"reports",className:"space-y-6",children:(0,t.jsxs)(u.Zb,{className:"p-8 text-center",children:[(0,t.jsx)(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tax Reports"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Generate comprehensive tax reports including Schedule C, profit & loss statements, and deduction summaries."}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[(0,t.jsx)(h.z,{variant:"outline",className:"h-auto p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Schedule C"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Export business income and expenses"})]})}),(0,t.jsx)(h.z,{variant:"outline",className:"h-auto p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"font-medium",children:"P&L Statement"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Profit and loss for tax year"})]})}),(0,t.jsx)(h.z,{variant:"outline",className:"h-auto p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Deduction Summary"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Detailed breakdown by category"})]})})]})]})})]})]})}}},function(e){e.O(0,[351,425,293,528,744],function(){return e(e.s=17285)}),_N_E=e.O()}]);