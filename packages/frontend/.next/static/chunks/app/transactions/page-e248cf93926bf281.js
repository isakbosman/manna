(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{60024:function(e,s,a){Promise.resolve().then(a.bind(a,50312))},50312:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return sY}});var t=a(12101),n=a(70093),r=a(49187),l=a(57190),i=a(32549),c=a(38315),o=a(41944),d=a(65246),m=a(6889),x=a(13492),u=a(57673),h=a(5169);let g=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,h.cn)("w-full caption-bottom text-sm",a),...n})})});g.displayName="Table";let p=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("thead",{ref:s,className:(0,h.cn)("[&_tr]:border-b",a),...n})});p.displayName="TableHeader";let f=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,h.cn)("[&_tr:last-child]:border-0",a),...n})});f.displayName="TableBody",n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,h.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...n})}).displayName="TableFooter";let j=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("tr",{ref:s,className:(0,h.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...n})});j.displayName="TableRow";let y=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("th",{ref:s,className:(0,h.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...n})});y.displayName="TableHead";let v=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("td",{ref:s,className:(0,h.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...n})});v.displayName="TableCell",n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("caption",{ref:s,className:(0,h.cn)("mt-4 text-sm text-muted-foreground",a),...n})}).displayName="TableCaption";var N=a(24319),w=a(71109),b=a(61697),C=a(83730),k=a(64694);let _=w.fC,S=w.xz;w.ZA,w.Uv,w.Tr,w.Ee,n.forwardRef((e,s)=>{let{className:a,inset:n,children:r,...l}=e;return(0,t.jsxs)(w.fF,{ref:s,className:(0,h.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",a),...l,children:[r,(0,t.jsx)(b.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=w.fF.displayName,n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(w.tu,{ref:s,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=w.tu.displayName;let z=n.forwardRef((e,s)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,t.jsx)(w.Uv,{children:(0,t.jsx)(w.VY,{ref:s,sideOffset:n,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});z.displayName=w.VY.displayName;let D=n.forwardRef((e,s)=>{let{className:a,inset:n,...r}=e;return(0,t.jsx)(w.ck,{ref:s,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",a),...r})});D.displayName=w.ck.displayName;let Z=n.forwardRef((e,s)=>{let{className:a,children:n,checked:r,...l}=e;return(0,t.jsxs)(w.oC,{ref:s,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.wU,{children:(0,t.jsx)(C.Z,{className:"h-4 w-4"})})}),n]})});Z.displayName=w.oC.displayName,n.forwardRef((e,s)=>{let{className:a,children:n,...r}=e;return(0,t.jsxs)(w.Rk,{ref:s,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.wU,{children:(0,t.jsx)(k.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=w.Rk.displayName;let F=n.forwardRef((e,s)=>{let{className:a,inset:n,...r}=e;return(0,t.jsx)(w.__,{ref:s,className:(0,h.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...r})});F.displayName=w.__.displayName;let M=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(w.Z0,{ref:s,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});M.displayName=w.Z0.displayName;var T=a(22750),E=a(15324),R=a(15254),A=a(63718),U=a(62134),L=a(52448),P=a(47436),V=a(6350),I=a(88267),K=a(49352);function q(e){var s;let{columns:a,data:r,onRowSelectionChange:l,onRowClick:i,searchKey:c="description",searchPlaceholder:d="Search transactions...",showColumnToggle:m=!0,showPagination:w=!0,pageSize:C=25,isLoading:k=!1,emptyMessage:D="No transactions found.",className:q}=e,[O,Q]=(0,n.useState)([]),[W,B]=(0,n.useState)([]),[G,Y]=(0,n.useState)({}),[H,$]=(0,n.useState)({}),[J,X]=(0,n.useState)(""),[ee,es]=(0,n.useState)({pageIndex:0,pageSize:C}),ea=(0,x.b7)({data:r,columns:a,getCoreRowModel:(0,u.sC)(),getSortedRowModel:(0,u.tj)(),getFilteredRowModel:(0,u.vL)(),getPaginationRowModel:(0,u.G_)(),onSortingChange:Q,onColumnFiltersChange:B,onColumnVisibilityChange:Y,onRowSelectionChange:e=>{if($(e),l){let s="function"==typeof e?e(H):e;l(Object.keys(s).filter(e=>s[e]).map(e=>r[parseInt(e)]))}},onPaginationChange:es,onGlobalFilterChange:X,globalFilterFn:"includesString",state:{sorting:O,columnFilters:W,columnVisibility:G,rowSelection:H,pagination:ee,globalFilter:J}}),et=ea.getPageCount(),en=ea.getState().pagination.pageIndex+1,er=(0,n.useCallback)(()=>{let e;let s=[],a=[];for(let e=1;e<=et;e++)(1===e||e===et||e>=en-2&&e<=en+2)&&s.push(e);return s.forEach(s=>{e&&(s-e==2?a.push(e+1):s-e!=1&&a.push("...")),a.push(s),e=s}),a},[en,et]),el=Object.keys(H).filter(e=>H[e]).length;return(0,t.jsxs)("div",{className:(0,h.cn)("space-y-4",q),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center space-x-2",children:[(0,t.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,t.jsx)(T.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(N.I,{placeholder:d,value:null!=J?J:"",onChange:e=>X(e.target.value),className:"pl-9 pr-9"}),J&&(0,t.jsx)(o.z,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2 p-0",onClick:()=>X(""),children:(0,t.jsx)(E.Z,{className:"h-4 w-4"})})]}),el>0&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[el," row",1!==el?"s":""," selected"]})]}),m&&(0,t.jsxs)(_,{children:[(0,t.jsx)(S,{asChild:!0,children:(0,t.jsxs)(o.z,{variant:"outline",size:"sm",className:"ml-auto",children:[(0,t.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),"Columns",(0,t.jsx)(A.Z,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsxs)(z,{align:"end",className:"w-48",children:[(0,t.jsx)(F,{children:"Toggle columns"}),(0,t.jsx)(M,{}),ea.getAllColumns().filter(e=>e.getCanHide()).map(e=>(0,t.jsx)(Z,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:s=>e.toggleVisibility(!!s),children:e.id.replace(/_/g," ")},e.id))]})]})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(g,{children:[(0,t.jsx)(p,{children:ea.getHeaderGroups().map(e=>(0,t.jsx)(j,{children:e.headers.map(e=>(0,t.jsx)(y,{className:(0,h.cn)(e.column.getCanSort()&&"cursor-pointer select-none","whitespace-nowrap"),onClick:e.column.getToggleSortingHandler(),children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isPlaceholder?null:(0,x.ie)(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&(0,t.jsx)("div",{className:"ml-2",children:"asc"===e.column.getIsSorted()?(0,t.jsx)(U.Z,{className:"h-4 w-4"}):"desc"===e.column.getIsSorted()?(0,t.jsx)(L.Z,{className:"h-4 w-4"}):(0,t.jsx)(P.Z,{className:"h-4 w-4 text-muted-foreground/50"})})]})},e.id))},e.id))}),(0,t.jsx)(f,{children:k?(0,t.jsx)(j,{children:(0,t.jsx)(v,{colSpan:a.length,className:"h-96 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Loading transactions..."})]})})}):(null===(s=ea.getRowModel().rows)||void 0===s?void 0:s.length)?ea.getRowModel().rows.map(e=>(0,t.jsx)(j,{"data-state":e.getIsSelected()&&"selected",className:(0,h.cn)(i&&"cursor-pointer hover:bg-muted/50",e.getIsSelected()&&"bg-muted/50"),onClick:s=>{let a=s.target;!(a.closest('[role="checkbox"]')||a.closest("button")||a.closest("[data-no-row-click]"))&&i&&i(e.original)},children:e.getVisibleCells().map(e=>(0,t.jsx)(v,{className:"py-2",children:(0,x.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(j,{children:(0,t.jsx)(v,{colSpan:a.length,className:"h-96 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:D}),J&&(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>X(""),children:"Clear search"})]})})})})]})}),w&&et>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing"," ",(0,t.jsx)("span",{className:"font-medium",children:ea.getState().pagination.pageIndex*ea.getState().pagination.pageSize+1})," to ",(0,t.jsx)("span",{className:"font-medium",children:Math.min((ea.getState().pagination.pageIndex+1)*ea.getState().pagination.pageSize,r.length)})," of ",(0,t.jsx)("span",{className:"font-medium",children:r.length})," results"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"|"}),(0,t.jsx)("label",{className:"text-sm text-muted-foreground",children:"Rows per page:"}),(0,t.jsx)("select",{className:"h-8 w-16 rounded border border-input bg-background px-2 text-sm",value:ea.getState().pagination.pageSize,onChange:e=>{ea.setPageSize(Number(e.target.value))},children:[10,25,50,100].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>ea.setPageIndex(0),disabled:!ea.getCanPreviousPage(),className:"h-8 w-8 p-0",children:(0,t.jsx)(V.Z,{className:"h-4 w-4"})}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>ea.previousPage(),disabled:!ea.getCanPreviousPage(),className:"h-8 w-8 p-0",children:(0,t.jsx)(I.Z,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:er().map((e,s)=>"..."===e?(0,t.jsx)("span",{className:"px-2 text-muted-foreground",children:"..."},"dots-".concat(s)):(0,t.jsx)(o.z,{variant:en===e?"default":"outline",size:"sm",onClick:()=>ea.setPageIndex(e-1),className:"h-8 w-8 p-0",children:e},e))}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>ea.nextPage(),disabled:!ea.getCanNextPage(),className:"h-8 w-8 p-0",children:(0,t.jsx)(b.Z,{className:"h-4 w-4"})}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>ea.setPageIndex(ea.getPageCount()-1),disabled:!ea.getCanNextPage(),className:"h-8 w-8 p-0",children:(0,t.jsx)(K.Z,{className:"h-4 w-4"})})]})]})]})}var O=a(55813);let Q=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(O.f,{ref:s,className:(0,h.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...n})});Q.displayName=O.f.displayName;var W=a(49468),B=a(58272);let G=W.fC;W.ZA;let Y=W.B4,H=n.forwardRef((e,s)=>{let{className:a,children:n,...r}=e;return(0,t.jsxs)(W.xz,{ref:s,className:(0,h.cn)("flex h-10 w-full items-center justify-between rounded-md border border-neutral-300 bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...r,children:[n,(0,t.jsx)(W.JO,{asChild:!0,children:(0,t.jsx)(A.Z,{className:"h-4 w-4 opacity-50"})})]})});H.displayName=W.xz.displayName;let $=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(W.u_,{ref:s,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,t.jsx)(B.Z,{className:"h-4 w-4"})})});$.displayName=W.u_.displayName;let J=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(W.$G,{ref:s,className:(0,h.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,t.jsx)(A.Z,{className:"h-4 w-4"})})});J.displayName=W.$G.displayName;let X=n.forwardRef((e,s)=>{let{className:a,children:n,position:r="popper",...l}=e;return(0,t.jsx)(W.h_,{children:(0,t.jsxs)(W.VY,{ref:s,className:(0,h.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...l,children:[(0,t.jsx)($,{}),(0,t.jsx)(W.l_,{className:(0,h.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,t.jsx)(J,{})]})})});X.displayName=W.VY.displayName,n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(W.__,{ref:s,className:(0,h.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=W.__.displayName;let ee=n.forwardRef((e,s)=>{let{className:a,children:n,...r}=e;return(0,t.jsxs)(W.ck,{ref:s,className:(0,h.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(W.wU,{children:(0,t.jsx)(C.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(W.eT,{children:n})]})});ee.displayName=W.ck.displayName,n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(W.Z0,{ref:s,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=W.Z0.displayName;var es=a(47157);let ea=es.fC,et=es.xz,en=n.forwardRef((e,s)=>{let{className:a,align:n="center",sideOffset:r=4,...l}=e;return(0,t.jsx)(es.h_,{children:(0,t.jsx)(es.VY,{ref:s,align:n,sideOffset:r,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});en.displayName=es.VY.displayName;var er=a(94843);function el(e){let{className:s,classNames:a,showOutsideDays:n=!0,...r}=e;return(0,t.jsx)(er._,{showOutsideDays:n,className:(0,h.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,h.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,h.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...s}=e;return(0,t.jsx)(I.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...s}=e;return(0,t.jsx)(b.Z,{className:"h-4 w-4"})}},...r})}el.displayName="Calendar";let ei=(0,a(21335).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary-600 text-white hover:bg-primary-700",secondary:"border-transparent bg-secondary-100 text-secondary-900 hover:bg-secondary-200",destructive:"border-transparent bg-error-600 text-white hover:bg-error-700",outline:"text-foreground",success:"border-transparent bg-success-600 text-white hover:bg-success-700",warning:"border-transparent bg-warning-600 text-white hover:bg-warning-700",info:"border-transparent bg-info-600 text-white hover:bg-info-700"}},defaultVariants:{variant:"default"}});function ec(e){let{className:s,variant:a,...n}=e;return(0,t.jsx)("div",{className:(0,h.cn)(ei({variant:a}),s),...n})}var eo=a(25909),ed=a(17120),em=a(31280),ex=a(33469),eu=a(96198),eh=a(91264),eg=a(42073),ep=a(44832),ef=a(49541);let ej=[{label:"Today",getValue:()=>({from:new Date,to:new Date})},{label:"Yesterday",getValue:()=>({from:(0,ex.k)(new Date,1),to:(0,ex.k)(new Date,1)})},{label:"Last 7 days",getValue:()=>({from:(0,ex.k)(new Date,6),to:new Date})},{label:"Last 30 days",getValue:()=>({from:(0,ex.k)(new Date,29),to:new Date})},{label:"This month",getValue:()=>({from:(0,eu.N)(new Date),to:(0,eh.V)(new Date)})},{label:"Last month",getValue:()=>{let e=(0,eg.W)(new Date,1);return{from:(0,eu.N)(e),to:(0,eh.V)(e)}}},{label:"Last 3 months",getValue:()=>({from:(0,eg.W)(new Date,3),to:new Date})},{label:"Last 6 months",getValue:()=>({from:(0,eg.W)(new Date,6),to:new Date})},{label:"This year",getValue:()=>({from:new Date(new Date().getFullYear(),0,1),to:new Date})}];function ey(e){var s,a;let{filters:r,onFiltersChange:l,accounts:i,categories:c,onReset:d,className:m}=e,[x,u]=(0,n.useState)(!1),[g,p]=(0,n.useState)({}),[f,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(r.date_from||r.date_to)&&p({from:r.date_from?(0,ep.D)(r.date_from):void 0,to:r.date_to?(0,ep.D)(r.date_to):void 0})},[r.date_from,r.date_to]);let y=(e,s)=>{let a={...r};""===s||void 0===s||"all"===s?delete a[e]:a[e]=s,l(a)},v=e=>{p(e),l({...r,date_from:e.from?(0,ef.WU)(e.from,"yyyy-MM-dd"):void 0,date_to:e.to?(0,ef.WU)(e.to,"yyyy-MM-dd"):void 0})},w=e=>{v(e.getValue()),j(!1)},b=Object.keys(r).filter(e=>void 0!==r[e]&&"limit"!==e&&"offset"!==e).length;return(0,t.jsxs)("div",{className:(0,h.cn)("space-y-4",m),children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(ea,{open:f,onOpenChange:j,children:[(0,t.jsx)(et,{asChild:!0,children:(0,t.jsxs)(o.z,{variant:"outline",className:(0,h.cn)("w-[240px] justify-start text-left font-normal",!g.from&&"text-muted-foreground"),children:[(0,t.jsx)(eo.Z,{className:"mr-2 h-4 w-4"}),g.from?g.to?(0,t.jsxs)(t.Fragment,{children:[(0,ef.WU)(g.from,"MMM d, yyyy")," - ",(0,ef.WU)(g.to,"MMM d, yyyy")]}):(0,ef.WU)(g.from,"MMM d, yyyy"):"Select date range"]})}),(0,t.jsx)(en,{className:"w-auto p-0",align:"start",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("div",{className:"border-r p-3 space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Quick Select"}),ej.map(e=>(0,t.jsx)(o.z,{variant:"ghost",size:"sm",className:"w-full justify-start text-left",onClick:()=>w(e),children:e.label},e.label))]}),(0,t.jsx)("div",{className:"p-3",children:(0,t.jsx)(el,{mode:"range",selected:g,onSelect:v,initialFocus:!0,numberOfMonths:2})})]})})]}),(0,t.jsxs)(G,{value:r.account_id||"all",onValueChange:e=>y("account_id","all"===e?void 0:e),children:[(0,t.jsx)(H,{className:"w-[200px]",children:(0,t.jsx)(Y,{placeholder:"All accounts"})}),(0,t.jsxs)(X,{children:[(0,t.jsx)(ee,{value:"all",children:"All accounts"}),i.map(e=>(0,t.jsx)(ee,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{children:e.name}),e.mask&&(0,t.jsxs)("span",{className:"ml-2 text-xs text-muted-foreground",children:["•••• ",e.mask]})]})},e.id))]})]}),(0,t.jsxs)(G,{value:r.category_id||"all",onValueChange:e=>y("category_id","all"===e?void 0:e),children:[(0,t.jsx)(H,{className:"w-[200px]",children:(0,t.jsx)(Y,{placeholder:"All categories"})}),(0,t.jsxs)(X,{children:[(0,t.jsx)(ee,{value:"all",children:"All categories"}),c.map(e=>(0,t.jsx)(ee,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center",children:[e.icon&&(0,t.jsx)("span",{className:"mr-2",children:e.icon}),(0,t.jsx)("span",{children:e.name})]})},e.id))]})]}),(0,t.jsxs)(G,{value:r.transaction_type||"all",onValueChange:e=>y("transaction_type",e),children:[(0,t.jsx)(H,{className:"w-[150px]",children:(0,t.jsx)(Y,{placeholder:"All types"})}),(0,t.jsxs)(X,{children:[(0,t.jsx)(ee,{value:"all",children:"All types"}),(0,t.jsx)(ee,{value:"income",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),"Income"]})}),(0,t.jsx)(ee,{value:"expense",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 mr-2"}),"Expense"]})})]})]}),(0,t.jsxs)("div",{className:"relative flex-1 min-w-[200px] max-w-[400px]",children:[(0,t.jsx)(T.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(N.I,{placeholder:"Search by description or merchant...",value:r.search||"",onChange:e=>y("search",e.target.value),className:"pl-9"})]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>u(!x),children:[(0,t.jsx)(ed.Z,{className:"mr-2 h-4 w-4"}),"Advanced",(0,t.jsx)(A.Z,{className:(0,h.cn)("ml-2 h-4 w-4 transition-transform",x&&"rotate-180")})]}),b>0&&(0,t.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>{p({}),d?d():l({})},children:[(0,t.jsx)(E.Z,{className:"mr-2 h-4 w-4"}),"Clear (",b,")"]})]}),x&&(0,t.jsxs)("div",{className:"border rounded-lg p-4 space-y-4 bg-muted/30",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(Q,{children:"Amount Range"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(em.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(N.I,{type:"number",placeholder:"Min",value:r.amount_min||"",onChange:e=>y("amount_min",e.target.value?parseFloat(e.target.value):void 0),className:"pl-9"})]}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"to"}),(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(em.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(N.I,{type:"number",placeholder:"Max",value:r.amount_max||"",onChange:e=>y("amount_max",e.target.value?parseFloat(e.target.value):void 0),className:"pl-9"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(Q,{children:"Merchant Name"}),(0,t.jsx)(N.I,{placeholder:"Enter merchant name...",value:r.merchant_name||"",onChange:e=>y("merchant_name",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(Q,{children:"Transaction Status"}),(0,t.jsxs)(G,{value:void 0===r.is_pending?"all":r.is_pending.toString(),onValueChange:e=>y("is_pending","all"===e?void 0:"true"===e),children:[(0,t.jsx)(H,{children:(0,t.jsx)(Y,{placeholder:"All statuses"})}),(0,t.jsxs)(X,{children:[(0,t.jsx)(ee,{value:"all",children:"All statuses"}),(0,t.jsx)(ee,{value:"false",children:"Posted"}),(0,t.jsx)(ee,{value:"true",children:"Pending"})]})]})]})]}),b>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),r.date_from&&r.date_to&&(0,t.jsxs)(ec,{variant:"secondary",children:[(0,ef.WU)((0,ep.D)(r.date_from),"MMM d")," - ",(0,ef.WU)((0,ep.D)(r.date_to),"MMM d")]}),r.account_id&&(0,t.jsxs)(ec,{variant:"secondary",children:["Account: ",null===(s=i.find(e=>e.id===r.account_id))||void 0===s?void 0:s.name]}),r.category_id&&(0,t.jsxs)(ec,{variant:"secondary",children:["Category: ",null===(a=c.find(e=>e.id===r.category_id))||void 0===a?void 0:a.name]}),r.transaction_type&&"all"!==r.transaction_type&&(0,t.jsxs)(ec,{variant:"secondary",children:["Type: ",r.transaction_type]}),void 0!==r.amount_min&&(0,t.jsxs)(ec,{variant:"secondary",children:["Min: $",r.amount_min]}),void 0!==r.amount_max&&(0,t.jsxs)(ec,{variant:"secondary",children:["Max: $",r.amount_max]}),r.merchant_name&&(0,t.jsxs)(ec,{variant:"secondary",children:["Merchant: ",r.merchant_name]}),void 0!==r.is_pending&&(0,t.jsxs)(ec,{variant:"secondary",children:["Status: ",r.is_pending?"Pending":"Posted"]})]})]})]})}let ev=n.forwardRef((e,s)=>{let{className:a,label:n,description:r,error:l,...i}=e;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"relative flex items-center",children:(0,t.jsx)("input",{type:"checkbox",className:(0,h.cn)("h-4 w-4 rounded border-neutral-300 text-primary-600 shadow-sm focus:border-primary-500 focus:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-50",l&&"border-error-500 focus:border-error-500 focus:ring-error-500",a),ref:s,...i})}),n&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-neutral-900",children:n}),r&&(0,t.jsx)("p",{className:"text-sm text-neutral-600",children:r})]})]}),l&&(0,t.jsx)("p",{className:"text-sm text-error-600",children:l})]})});ev.displayName="Checkbox";var eN=a(30291);let ew=eN.zt,eb=eN.fC,eC=eN.xz,ek=n.forwardRef((e,s)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,t.jsx)(eN.VY,{ref:s,sideOffset:n,className:(0,h.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})});ek.displayName=eN.VY.displayName;var e_=a(67484),eS=a(15328),ez=a(10478),eD=a(11743),eZ=a(26256),eF=a(90815),eM=a(73937),eT=a(3681),eE=a(20817),eR=a(8155),eA=a(77013),eU=a(97158),eL=a(24075),eP=a(29272),eV=a(88575),eI=a(55221);let eK=n.forwardRef((e,s)=>{let{isOpen:a,onClose:r,title:l,description:i,children:c,size:o="md",className:d,hideCloseButton:m}=e;return(n.useEffect(()=>{let e=e=>{"Escape"===e.key&&r()};return a&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[a,r]),a)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,t.jsxs)("div",{ref:s,className:(0,h.cn)("relative w-full rounded-lg bg-white shadow-xl",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[o],d),children:[(l||!m)&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 pb-4",children:[(0,t.jsxs)("div",{children:[l&&(0,t.jsx)("h2",{className:"text-lg font-semibold text-neutral-900",children:l}),i&&(0,t.jsx)("p",{className:"mt-1 text-sm text-neutral-600",children:i})]}),!m&&(0,t.jsx)("button",{onClick:r,className:"rounded-md p-2 hover:bg-neutral-100",children:(0,t.jsx)(E.Z,{className:"h-5 w-5"})})]}),(0,t.jsx)("div",{className:(0,h.cn)("px-6",l||!m?"pb-6":"py-6"),children:c})]})]}):null});eK.displayName="Modal";let eq=n.forwardRef((e,s)=>{let{className:a,children:n,viewportClassName:r,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,h.cn)("relative overflow-hidden",a),...l,children:(0,t.jsx)("div",{className:(0,h.cn)("h-full w-full overflow-auto scrollbar-thin scrollbar-thumb-neutral-300 scrollbar-track-transparent hover:scrollbar-thumb-neutral-400",r),children:n})})});eq.displayName="ScrollArea";var eO=a(70966);let eQ={getCategories:async()=>eO.hi.get("/api/v1/categories"),createCategory:async e=>eO.hi.post("/api/v1/categories",e),updateCategory:async(e,s)=>eO.hi.put("/api/v1/categories/".concat(e),s),deleteCategory:async e=>eO.hi.delete("/api/v1/categories/".concat(e)),bulkUpdateCategories:async e=>eO.hi.patch("/api/v1/categories/bulk",{updates:e}),mergeCategories:async(e,s)=>eO.hi.post("/api/v1/categories/merge",{source_id:e,target_id:s}),getCategoryStats:async e=>eO.hi.get("/api/v1/categories/stats".concat(e?"?category_id=".concat(e):"")),exportCategories:async e=>eO.hi.get("/api/v1/categories/export?format=".concat(e),{responseType:"blob"}),importCategories:async(e,s)=>{let a=new FormData;return a.append("file",e),(null==s?void 0:s.merge)&&a.append("merge","true"),(null==s?void 0:s.overwrite)&&a.append("overwrite","true"),eO.hi.post("/api/v1/categories/import",a,{headers:{"Content-Type":"multipart/form-data"}})},getCategorySpending:async e=>{let s=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,t]=e;null!=t&&s.append(a,t.toString())}),eO.hi.get("/api/v1/categories/spending?".concat(s.toString()))},bulkCategorize:async e=>eO.hi.post("/api/v1/ml/bulk-categorize",{transaction_ids:e})},eW={getTransactions:async e=>{let s=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,t]=e;null!=t&&s.append(a,t.toString())}),eO.hi.get("/api/v1/transactions?".concat(s.toString()))},updateTransaction:async(e,s)=>eO.hi.put("/api/v1/transactions/".concat(e),s),deleteTransaction:async e=>eO.hi.delete("/api/v1/transactions/".concat(e)),bulkUpdateTransactions:async e=>eO.hi.put("/api/v1/transactions/bulk",e),getTransactionStats:async e=>{let s=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,t]=e;null!=t&&s.append(a,t.toString())}),eO.hi.get("/api/v1/transactions/stats?".concat(s.toString()))},syncTransactions:async e=>eO.hi.post("/api/v1/plaid/sync-transactions",{account_ids:e?[e]:void 0}),categorizeTransactions:async e=>eO.hi.post("/api/v1/transactions/categorize",{transaction_ids:e}),exportTransactions:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",a=new URLSearchParams;return a.append("format",s),e&&Object.entries(e).forEach(e=>{let[s,t]=e;null!=t&&("transaction_ids"===s&&Array.isArray(t)?t.forEach(e=>a.append("transaction_ids",e)):a.append(s,t.toString()))}),eO.hi.download("/api/v1/transactions/export?".concat(a.toString()),"transactions.".concat(s))}},eB={salary:(0,t.jsx)(em.Z,{className:"h-4 w-4"}),freelance:(0,t.jsx)(em.Z,{className:"h-4 w-4"}),investment:(0,t.jsx)(em.Z,{className:"h-4 w-4"}),business:(0,t.jsx)(eA.Z,{className:"h-4 w-4"}),other_income:(0,t.jsx)(em.Z,{className:"h-4 w-4"}),groceries:(0,t.jsx)(eU.Z,{className:"h-4 w-4"}),restaurants:(0,t.jsx)(eU.Z,{className:"h-4 w-4"}),gas:(0,t.jsx)(eU.Z,{className:"h-4 w-4"}),utilities:(0,t.jsx)(eA.Z,{className:"h-4 w-4"}),rent:(0,t.jsx)(eA.Z,{className:"h-4 w-4"}),mortgage:(0,t.jsx)(eA.Z,{className:"h-4 w-4"}),default:(0,t.jsx)(eD.Z,{className:"h-4 w-4"})};function eG(e){let{isOpen:s,onClose:a,transactions:r,onTransactionsUpdated:l,className:i}=e,[c,d]=n.useState([]),[m,x]=n.useState([]),[u,g]=n.useState(""),[p,f]=n.useState(""),[j,y]=n.useState({}),[v,w]=n.useState(!1),[b,k]=n.useState(!1),[_,S]=n.useState(!1),[z,D]=n.useState(""),[Z,F]=n.useState("expense"),[M,R]=n.useState(""),[A,U]=n.useState(""),[L,P]=n.useState(0),V=n.useRef(null),I=n.useRef([]);n.useEffect(()=>{s&&(K(),q(),g(""),f(""),R(""),U(""),P(0),setTimeout(()=>{var e;null===(e=V.current)||void 0===e||e.focus()},100))},[s,r]),n.useEffect(()=>{let e=c.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.type.toLowerCase().includes(u.toLowerCase())),s=r[L];if(s&&j[s.id]){let a=new Set(j[s.id].map(e=>e.category_id));e.sort((e,s)=>{let t=a.has(e.id),n=a.has(s.id);return t&&!n?-1:!t&&n?1:e.name.localeCompare(s.name)})}else e.sort((e,s)=>e.name.localeCompare(s.name));x(e)},[c,u,j,L,r]),n.useEffect(()=>{let e=e=>{var t,n,l,i;if(s)switch(e.key){case"Escape":_?S(!1):a();break;case"ArrowDown":if(e.preventDefault(),V.current===document.activeElement)null===(t=I.current[0])||void 0===t||t.focus();else{let e=Math.min(I.current.findIndex(e=>e===document.activeElement)+1,m.length-1);null===(n=I.current[e])||void 0===n||n.focus()}break;case"ArrowUp":e.preventDefault();let c=I.current.findIndex(e=>e===document.activeElement);c<=0?null===(l=V.current)||void 0===l||l.focus():null===(i=I.current[c-1])||void 0===i||i.focus();break;case"Enter":e.preventDefault();let o=I.current.findIndex(e=>e===document.activeElement);o>=0&&B(m[o].id);break;case"ArrowLeft":L>0&&(P(e=>e-1),f(""));break;case"ArrowRight":L<r.length-1&&(P(e=>e+1),f(""))}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,m,L,r.length,_,a]);let K=async()=>{try{w(!0);let e=(await eQ.getCategories()).map(e=>({...e,icon_element:O(e)}));d(e)}catch(e){console.error("Failed to load categories:",e),U("Failed to load categories")}finally{w(!1)}},q=async()=>{if(0!==r.length)try{let e=r.map(e=>e.id),s=await eQ.bulkCategorize(e);y(s.predictions)}catch(e){console.error("Failed to load ML predictions:",e)}},O=e=>eB[e.icon||e.name.toLowerCase().replace(/\s+/g,"_")]||eB.default,Q=e=>{switch(e.type){case"income":return"success";case"expense":return"destructive";case"transfer":return"secondary";default:return"outline"}},W=(e,s)=>{let a=j[s];if(!a)return 0;let t=a.find(s=>s.category_id===e);return(null==t?void 0:t.confidence)||0},B=e=>{f(e)},G=async()=>{if(z.trim())try{w(!0);let e=await eQ.createCategory({name:z.trim(),type:Z,is_system:!1}),s={...e,icon_element:O(e)};d(e=>[...e,s]),f(e.id),S(!1),D(""),R('Created category "'.concat(e.name,'"'))}catch(e){console.error("Failed to create category:",e),U("Failed to create category")}finally{w(!1)}},Y=async()=>{if(p)try{if(k(!0),U(""),R(""),1===r.length){let e=await eW.updateTransaction(r[0].id,{category_id:p});l([e]),R("Transaction categorized successfully")}else{let e=0,s=[],a=[];for(let e=0;e<r.length;e+=10)a.push(r.slice(e,e+10));let t=[];for(let n of a)try{let s=await eW.bulkUpdateTransactions({transaction_ids:n.map(e=>e.id),updates:{category_id:p}});t.push(...s),e+=n.length}catch(e){s.push("Failed to update ".concat(n.length," transactions: ").concat(e.message))}l(t),0===s.length?R("".concat(e," transactions categorized successfully")):(R("".concat(e," transactions categorized successfully")),s.length>0&&U("".concat(s.length," batches failed. Some transactions may not have been updated.")))}1===r.length&&setTimeout(()=>{a()},1500)}catch(e){console.error("Failed to categorize transactions:",e),U(e.message||"Failed to categorize transactions")}finally{k(!1)}},H=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Math.abs(e)),$=r[L],J=$&&j[$.id]||[],X=c.find(e=>e.id===p);return s?(0,t.jsx)(eK,{isOpen:s,onClose:a,title:1===r.length?"Categorize Transaction":"Categorize ".concat(r.length," Transactions"),description:1===r.length?"Select a category for this transaction":"Select a category to apply to all selected transactions",size:"xl",className:i,children:(0,t.jsxs)("div",{className:"space-y-6",children:[A&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-error-50 border border-error-200 rounded-lg text-error-700",children:[(0,t.jsx)(eL.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:A}),(0,t.jsx)("button",{onClick:()=>U(""),className:"ml-auto p-1 hover:bg-error-100 rounded",children:(0,t.jsx)(E.Z,{className:"h-4 w-4"})})]}),M&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-success-50 border border-success-200 rounded-lg text-success-700",children:[(0,t.jsx)(eZ.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:M}),(0,t.jsx)("button",{onClick:()=>R(""),className:"ml-auto p-1 hover:bg-success-100 rounded",children:(0,t.jsx)(E.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"space-y-4",children:1===r.length?(0,t.jsx)("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-neutral-900",children:$.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-sm text-neutral-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eo.Z,{className:"h-4 w-4"}),(0,ef.WU)(new Date($.date),"MMM d, yyyy")]}),$.merchant_name&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eA.Z,{className:"h-4 w-4"}),$.merchant_name]})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:(0,h.cn)("text-lg font-bold",$.amount<0?"text-error-600":"text-success-600"),children:[$.amount<0?"-":"+",H($.amount)]})})]})}):(0,t.jsxs)("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("h3",{className:"font-semibold text-neutral-900",children:[r.length," Selected Transactions"]}),(0,t.jsxs)("div",{className:"text-sm text-neutral-600",children:["Total: ",H(r.reduce((e,s)=>e+s.amount,0))]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>P(e=>Math.max(0,e-1)),disabled:0===L,children:"Previous"}),(0,t.jsxs)("span",{className:"flex items-center px-3 py-1 bg-white border rounded text-sm",children:[L+1," of ",r.length]}),(0,t.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>P(e=>Math.min(r.length-1,e+1)),disabled:L===r.length-1,children:"Next"})]})]}),(0,t.jsxs)("div",{className:"flex items-start justify-between bg-white border rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-neutral-900",children:$.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-sm text-neutral-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eo.Z,{className:"h-4 w-4"}),(0,ef.WU)(new Date($.date),"MMM d, yyyy")]}),$.merchant_name&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eA.Z,{className:"h-4 w-4"}),$.merchant_name]})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:(0,h.cn)("font-bold",$.amount<0?"text-error-600":"text-success-600"),children:[$.amount<0?"-":"+",H($.amount)]})})]}),r.length>1&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-info-50 border border-info-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-info-700",children:[(0,t.jsx)(eP.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"Bulk Operation:"}),"The selected category will be applied to all ",r.length," transactions."]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-info-600",children:[r.filter(e=>!e.category_id).length," uncategorized transactions will be updated."]})]})]})}),J.length>0&&(0,t.jsxs)("div",{className:"bg-info-50 border border-info-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(eV.Z,{className:"h-5 w-5 text-info-600"}),(0,t.jsx)("h4",{className:"font-medium text-info-900",children:"AI Suggestions"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:J.slice(0,4).map((e,s)=>{let a=c.find(s=>s.id===e.category_id);return a?(0,t.jsxs)("button",{onClick:()=>B(e.category_id),className:(0,h.cn)("flex items-center gap-2 p-3 rounded-lg border text-left transition-colors hover:bg-info-100",p===e.category_id?"border-info-500 bg-info-100":"border-info-200 bg-white"),children:[a.icon_element,(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:a.name}),(0,t.jsxs)(ec,{variant:"info",className:"text-xs",children:[Math.round(100*e.confidence),"% confidence"]})]}),p===e.category_id&&(0,t.jsx)(C.Z,{className:"h-4 w-4 text-info-600"})]},e.category_id):null})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(T.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-500"}),(0,t.jsx)(N.I,{ref:V,placeholder:"Search categories...",value:u,onChange:e=>g(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>S(!0),children:[(0,t.jsx)(eI.Z,{className:"h-4 w-4 mr-1"}),"New"]})]}),_&&(0,t.jsxs)("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-4 space-y-3",children:[(0,t.jsx)("h4",{className:"font-medium text-neutral-900",children:"Create New Category"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(N.I,{placeholder:"Category name",value:z,onChange:e=>D(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),G())},className:"flex-1"}),(0,t.jsxs)("select",{value:Z,onChange:e=>F(e.target.value),className:"px-3 py-2 border border-neutral-300 rounded-md text-sm",children:[(0,t.jsx)("option",{value:"expense",children:"Expense"}),(0,t.jsx)("option",{value:"income",children:"Income"}),(0,t.jsx)("option",{value:"transfer",children:"Transfer"})]}),(0,t.jsx)(o.z,{onClick:G,disabled:!z.trim()||v,loading:v,children:"Create"}),(0,t.jsx)(o.z,{variant:"outline",onClick:()=>{S(!1),D("")},children:"Cancel"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("h4",{className:"font-medium text-neutral-900",children:["Categories (",m.length,")"]}),(0,t.jsx)(eq,{className:"max-h-80",children:(0,t.jsx)("div",{className:"space-y-1 pr-4",children:v?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-primary-600"})}):0===m.length?(0,t.jsx)("div",{className:"text-center py-8 text-neutral-500",children:u?"No categories found":"No categories available"}):m.map((e,s)=>{let a=W(e.id,(null==$?void 0:$.id)||""),n=p===e.id;return(0,t.jsxs)("button",{ref:e=>{I.current[s]=e},onClick:()=>B(e.id),className:(0,h.cn)("w-full flex items-center gap-3 p-3 rounded-lg border text-left transition-colors hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-primary-500",n?"border-primary-500 bg-primary-50":"border-neutral-200",a>.7&&"ring-2 ring-info-200"),children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:e.icon_element}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-neutral-900 truncate",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(ec,{variant:Q(e),className:"text-xs",children:e.type}),a>0&&(0,t.jsxs)(ec,{variant:"info",className:"text-xs",children:[Math.round(100*a),"% match"]})]})]}),n&&(0,t.jsx)(C.Z,{className:"h-5 w-5 text-primary-600 flex-shrink-0"})]},e.id)})})})]}),X&&(0,t.jsx)("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[X.icon_element,(0,t.jsxs)("span",{className:"font-medium text-primary-900",children:["Selected: ",X.name]})]}),(0,t.jsx)(ec,{variant:Q(X),children:X.type})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t pt-4",children:[(0,t.jsx)("div",{className:"text-sm text-neutral-600",children:1===r.length?"Use arrow keys to navigate, Enter to select":"Will apply to ".concat(r.length," transactions • Use ← → to preview")}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.z,{variant:"outline",onClick:a,children:"Cancel"}),(0,t.jsx)(o.z,{onClick:Y,disabled:!p||b,loading:b,className:r.length>1?"bg-primary-600 hover:bg-primary-700":"",children:b?1===r.length?"Applying...":"Applying to ".concat(r.length," transactions..."):1===r.length?"Apply Category":"Apply to ".concat(r.length," transactions")})]})]})]})}):null}var eY=a(41514),eH=a(78861),e$=a(87261),eJ=a(72263),eX=a(70533),e0=a(56493),e1=a(51068),e4=a(68966),e2=a(66389),e5=a(38484),e3=a(28013),e6=a(30488),e8=a(28381),e9=a(22728),e7=a(94904),se=a(32600),ss=a(16108);let sa=["\uD83C\uDFE0","\uD83D\uDE97","\uD83C\uDF54","\uD83D\uDC8A","\uD83D\uDCDA","\uD83C\uDFAC","✈️","\uD83D\uDC55","⚡","\uD83D\uDCF1","\uD83C\uDFB5","\uD83C\uDFCB️","\uD83C\uDFA8","\uD83D\uDC15","\uD83C\uDF31","\uD83D\uDD27","\uD83C\uDF81","☕","\uD83C\uDFE6","\uD83D\uDCBC"],st=["#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#EC4899","#F43F5E","#84CC16","#10B981","#14B8A6","#6366F1","#8B5CF6","#A855F7"];function sn(e){let{isOpen:s,onClose:a,className:r}=e,d=(0,l.NL)(),m=(0,ss.PM)(),x=(0,ss.cM)(),[u,h]=n.useState(""),[g,p]=n.useState(!1),[f,j]=n.useState(null),[y,v]=n.useState("hierarchy"),[w,b]=n.useState("all"),[C,k]=n.useState([]),[_,S]=n.useState(new Set),[z,D]=n.useState(!1),[Z,F]=n.useState(null),[M,E]=n.useState(!1),[R,A]=n.useState(!1),[U,L]=n.useState(null),[P,V]=n.useState(!1),[I,K]=n.useState(null),{data:q=[],isLoading:O}=(0,i.a)({queryKey:["categories"],queryFn:eQ.getCategories}),{data:Q=[],isLoading:W}=(0,i.a)({queryKey:["category-stats"],queryFn:()=>eQ.getCategoryStats(),enabled:"stats"===y}),{data:B=[],isLoading:$}=(0,i.a)({queryKey:["category-spending"],queryFn:()=>eQ.getCategorySpending(),enabled:"stats"===y}),J=(0,c.D)({mutationFn:eQ.createCategory,onSuccess:()=>{d.invalidateQueries({queryKey:["categories"]}),d.invalidateQueries({queryKey:["category-stats"]}),m("Category Created","Category created successfully"),p(!1)},onError:e=>{x("Create Failed",e.message||"Failed to create category")}}),es=(0,c.D)({mutationFn:e=>{let{id:s,updates:a}=e;return eQ.updateCategory(s,a)},onSuccess:()=>{d.invalidateQueries({queryKey:["categories"]}),d.invalidateQueries({queryKey:["category-stats"]}),m("Category Updated","Category updated successfully"),j(null)},onError:e=>{x("Update Failed",e.message||"Failed to update category")}}),ea=(0,c.D)({mutationFn:eQ.deleteCategory,onSuccess:()=>{d.invalidateQueries({queryKey:["categories"]}),d.invalidateQueries({queryKey:["category-stats"]}),m("Category Deleted","Category deleted successfully")},onError:e=>{x("Delete Failed",e.message||"Failed to delete category")}}),et=(0,c.D)({mutationFn:eQ.bulkUpdateCategories,onSuccess:()=>{d.invalidateQueries({queryKey:["categories"]}),m("Categories Updated","Category hierarchy updated successfully")},onError:e=>{x("Update Failed",e.message||"Failed to update categories")}}),en=(0,c.D)({mutationFn:e=>{let{sourceId:s,targetId:a}=e;return eQ.mergeCategories(s,a)},onSuccess:()=>{d.invalidateQueries({queryKey:["categories"]}),d.invalidateQueries({queryKey:["category-stats"]}),m("Categories Merged","Categories merged successfully"),A(!1),L(null)},onError:e=>{x("Merge Failed",e.message||"Failed to merge categories")}});(0,e9.Dy)((0,e9.VT)(e9.we),(0,e9.VT)(e9.Lg,{coordinateGetter:e7.is}));let er=e=>{let s=new Map,a=[];return e.forEach(e=>{s.set(e.id,{...e,children:[],level:0,isExpanded:_.has(e.id)})}),e.forEach(e=>{let t=s.get(e.id);if(e.parent_id&&s.has(e.parent_id)){let a=s.get(e.parent_id);a.children.push(t),t.level=(a.level||0)+1}else a.push(t)}),a},el=e=>{let s=[],a=e=>{s.push(e),e.isExpanded&&e.children&&e.children.forEach(a)};return e.forEach(a),s},ei=n.useMemo(()=>{let e=q.filter(e=>{let s=e.name.toLowerCase().includes(u.toLowerCase()),a="all"===w||"system"===w&&e.is_system||"custom"===w&&!e.is_system;return s&&a});return"hierarchy"===y?el(er(e)):e.map(e=>({...e,level:0}))},[q,u,w,y,_]),eo=async()=>{if(0!==C.length){if(C.filter(e=>{var s;return null===(s=q.find(s=>s.id===e))||void 0===s?void 0:s.is_system}).length>0){x("Cannot Delete","System categories cannot be deleted");return}if(confirm("Delete ".concat(C.length," categories? This cannot be undone.")))try{await Promise.all(C.map(e=>eQ.deleteCategory(e))),d.invalidateQueries({queryKey:["categories"]}),m("Categories Deleted","".concat(C.length," categories deleted")),k([])}catch(e){x("Delete Failed",e.message||"Failed to delete categories")}}},ed=async e=>{try{let s=await eQ.exportCategories(e),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download="categories.".concat(e),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a),m("Export Complete","Categories exported as ".concat(e.toUpperCase()))}catch(e){x("Export Failed",e.message||"Failed to export categories")}},em=async e=>{if(e.is_system){x("Cannot Delete","System categories cannot be deleted");return}window.confirm('Are you sure you want to delete "'.concat(e.name,'"? This action cannot be undone.'))&&ea.mutate(e.id)},ex=async e=>{let s={...e,name:"".concat(e.name," (Copy)"),is_system:!1,parent_id:e.parent_id};delete s.id,delete s.created_at,delete s.updated_at,J.mutate(s)},eu=e=>{L(e),A(!0)},eh=e=>{K(e),V(!0)};return s?(0,t.jsxs)(eK,{isOpen:s,onClose:a,title:"Category Management",description:"Create and manage categories for your transactions",size:"xl",className:r,children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(G,{value:y,onValueChange:e=>v(e),children:[(0,t.jsx)(H,{className:"w-[140px]",children:(0,t.jsx)(Y,{})}),(0,t.jsxs)(X,{children:[(0,t.jsx)(ee,{value:"hierarchy",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eY.Z,{className:"h-4 w-4"}),"Hierarchy"]})}),(0,t.jsx)(ee,{value:"grid",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eD.Z,{className:"h-4 w-4"}),"Grid"]})}),(0,t.jsx)(ee,{value:"stats",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eH.Z,{className:"h-4 w-4"}),"Statistics"]})}),(0,t.jsx)(ee,{value:"rules",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e$.Z,{className:"h-4 w-4"}),"Rules"]})})]})]}),(0,t.jsxs)(G,{value:w,onValueChange:e=>b(e),children:[(0,t.jsx)(H,{className:"w-[120px]",children:(0,t.jsx)(Y,{})}),(0,t.jsxs)(X,{children:[(0,t.jsx)(ee,{value:"all",children:"All"}),(0,t.jsx)(ee,{value:"system",children:"System"}),(0,t.jsx)(ee,{value:"custom",children:"Custom"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>ed("csv"),children:[(0,t.jsx)(eJ.Z,{className:"h-4 w-4 mr-1"}),"Export"]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>E(!0),children:[(0,t.jsx)(eX.Z,{className:"h-4 w-4 mr-1"}),"Import"]}),(0,t.jsxs)(o.z,{onClick:()=>p(!0),size:"sm",children:[(0,t.jsx)(eI.Z,{className:"h-4 w-4 mr-1"}),"New Category"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"relative max-w-sm",children:[(0,t.jsx)(T.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-500"}),(0,t.jsx)(N.I,{placeholder:"Search categories...",value:u,onChange:e=>h(e.target.value),className:"pl-10"})]}),C.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(ec,{variant:"outline",children:[C.length," selected"]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:eo,disabled:ea.isPending,children:[(0,t.jsx)(eR.Z,{className:"h-4 w-4 mr-1"}),"Delete Selected"]}),(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>k([]),children:"Clear"})]})]}),(0,t.jsx)("div",{className:"h-[600px] overflow-hidden",children:(0,t.jsxs)(eq,{className:"h-full",children:["hierarchy"===y&&(0,t.jsx)(so,{categories:ei,selectedCategories:C,onSelectionChange:k,onEdit:j,onDelete:em,onCopy:ex,onMerge:eu,onPreview:eh,onToggleExpand:e=>{let s=new Set(_);s.has(e)?s.delete(e):s.add(e),S(s)},onDragEnd:e=>{let{active:s,over:a}=e;if(!a||s.id===a.id)return;let t=ei.findIndex(e=>e.id===s.id),n=ei.findIndex(e=>e.id===a.id);if(-1===t||-1===n)return;let r=(0,e7.Rp)(ei,t,n).map((e,s)=>({id:e.id,sort_order:s}));et.mutate(r)},isLoading:O}),"grid"===y&&(0,t.jsx)(sd,{categories:ei,selectedCategories:C,onSelectionChange:k,onEdit:j,onDelete:em,onCopy:ex,onMerge:eu,onPreview:eh,isLoading:O}),"stats"===y&&(0,t.jsx)(sm,{categoryStats:Q,categorySpending:B,searchTerm:u,isLoading:W||$}),"rules"===y&&(0,t.jsx)(sx,{categories:ei,onManageRules:e=>{F(e),D(!0)},isLoading:O})]})}),0===ei.length&&!O&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(eD.Z,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No categories found"}),(0,t.jsx)("p",{className:"text-neutral-600 mb-4",children:u?"Try adjusting your search term.":"Create your first category to get started."}),!u&&(0,t.jsxs)(o.z,{onClick:()=>p(!0),children:[(0,t.jsx)(eI.Z,{className:"h-4 w-4 mr-1"}),"Create Category"]})]})]}),(0,t.jsx)(sl,{isOpen:g||!!f,onClose:()=>{p(!1),j(null)},category:f,categories:q,onSubmit:e=>{f?es.mutate({id:f.id,updates:e}):J.mutate({...e,is_system:!1})},isLoading:J.isPending||es.isPending}),(0,t.jsx)(su,{isOpen:z,onClose:()=>{D(!1),F(null)},category:Z}),(0,t.jsx)(sh,{isOpen:M,onClose:()=>E(!1),onImport:async(e,s)=>{try{let a=await eQ.importCategories(e,s);d.invalidateQueries({queryKey:["categories"]}),m("Import Complete","Imported ".concat(a.imported_count," categories")),E(!1)}catch(e){x("Import Failed",e.message||"Failed to import categories")}}}),(0,t.jsx)(sg,{isOpen:R,onClose:()=>{A(!1),L(null)},sourceCategory:U,categories:q.filter(e=>e.id!==(null==U?void 0:U.id)),onMerge:e=>{U&&en.mutate({sourceId:U.id,targetId:e})},isLoading:en.isPending}),(0,t.jsx)(sp,{isOpen:P,onClose:()=>{V(!1),K(null)},category:I})]}):null}function sr(e){let{category:s,isSelected:a,onSelect:n,onEdit:r,onDelete:l,onCopy:i,onMerge:c,onPreview:d,onToggleExpand:m}=e,{attributes:x,listeners:u,setNodeRef:g,transform:p,transition:f}=(0,e7.nB)({id:s.id}),j={transform:se.ux.Transform.toString(p),transition:f},y=s.children&&s.children.length>0,v=24*(s.level||0);return(0,t.jsxs)("div",{ref:g,style:j,className:(0,h.cn)("flex items-center gap-3 p-3 rounded-lg border transition-all",a?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",style:{paddingLeft:v},children:[(0,t.jsx)(ev,{checked:a,onChange:e=>n(s.id,e.target.checked)}),(0,t.jsx)("div",{...x,...u,className:"cursor-grab hover:cursor-grabbing",children:(0,t.jsx)(e0.Z,{className:"h-4 w-4 text-neutral-400"})}),y&&m&&(0,t.jsx)("button",{onClick:()=>m(s.id),className:"p-1 hover:bg-neutral-100 rounded",children:s.isExpanded?(0,t.jsx)(A.Z,{className:"h-4 w-4"}):(0,t.jsx)(b.Z,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"w-6 h-6 rounded flex items-center justify-center text-sm",style:{backgroundColor:s.color||"#6B7280"},children:s.icon||si(s.type)})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-medium text-neutral-900 truncate",children:s.name}),(0,t.jsx)(ec,{variant:sc(s.type),className:"text-xs",children:s.type}),s.is_system&&(0,t.jsx)(ec,{variant:"outline",className:"text-xs",children:"System"})]}),s.keywords&&s.keywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[s.keywords.slice(0,3).map(e=>(0,t.jsx)(ec,{variant:"outline",className:"text-xs",children:e},e)),s.keywords.length>3&&(0,t.jsxs)(ec,{variant:"outline",className:"text-xs",children:["+",s.keywords.length-3," more"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(eb,{content:"Preview transactions",children:(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>d(s),className:"h-8 w-8 p-0",children:(0,t.jsx)(e1.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(eb,{content:"Copy category",children:(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>i(s),className:"h-8 w-8 p-0",children:(0,t.jsx)(eE.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(eb,{content:"Edit category",children:(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>r(s),className:"h-8 w-8 p-0",children:(0,t.jsx)(eT.Z,{className:"h-4 w-4"})})}),!s.is_system&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eb,{content:"Merge category",children:(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>c(s),className:"h-8 w-8 p-0",children:(0,t.jsx)(e4.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(eb,{content:"Delete category",children:(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>l(s),className:"h-8 w-8 p-0 text-error-600 hover:text-error-700 hover:bg-error-50",children:(0,t.jsx)(eR.Z,{className:"h-4 w-4"})})})]})]})]})}function sl(e){let{isOpen:s,onClose:a,category:r,categories:l,onSubmit:i,isLoading:c}=e,[d,m]=n.useState({name:"",type:"expense",icon:"",color:"#6B7280",keywords:[],confidence_threshold:.8}),[x,u]=n.useState(""),[h,g]=n.useState(!1),[p,f]=n.useState(!1);n.useEffect(()=>{r?m({name:r.name,type:r.type,icon:r.icon||"",color:r.color||"#6B7280",parent_id:r.parent_id,keywords:r.keywords||[],confidence_threshold:r.confidence_threshold||.8}):m({name:"",type:"expense",icon:"",color:"#6B7280",keywords:[],confidence_threshold:.8})},[r,s]);let j=()=>{x.trim()&&!d.keywords.includes(x.trim())&&(m(e=>({...e,keywords:[...e.keywords,x.trim()]})),u(""))},y=e=>{m(s=>({...s,keywords:s.keywords.filter(s=>s!==e)}))},v=l.filter(e=>e.id!==(null==r?void 0:r.id)&&!e.parent_id&&e.type===d.type);return(0,t.jsx)(eK,{isOpen:s,onClose:a,title:r?"Edit Category":"Create New Category",description:"Categories help organize your transactions for better financial insights",size:"lg",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.name.trim()&&i(d)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(Q,{htmlFor:"name",children:"Category Name *"}),(0,t.jsx)(N.I,{id:"name",value:d.name,onChange:e=>m(s=>({...s,name:e.target.value})),placeholder:"Enter category name",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(Q,{htmlFor:"type",children:"Type *"}),(0,t.jsxs)(G,{value:d.type,onValueChange:e=>m(s=>({...s,type:e})),children:[(0,t.jsx)(H,{children:(0,t.jsx)(Y,{})}),(0,t.jsxs)(X,{children:[(0,t.jsx)(ee,{value:"income",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e2.Z,{className:"h-4 w-4 text-success-600"}),"Income"]})}),(0,t.jsx)(ee,{value:"expense",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e5.Z,{className:"h-4 w-4 text-error-600"}),"Expense"]})}),(0,t.jsx)(ee,{value:"transfer",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(e3.Z,{className:"h-4 w-4 text-info-600"}),"Transfer"]})})]})]})]})]}),v.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(Q,{htmlFor:"parent",children:"Parent Category"}),(0,t.jsxs)(G,{value:d.parent_id||"none",onValueChange:e=>m(s=>({...s,parent_id:"none"===e?void 0:e})),children:[(0,t.jsx)(H,{children:(0,t.jsx)(Y,{placeholder:"Select parent category"})}),(0,t.jsxs)(X,{children:[(0,t.jsx)(ee,{value:"none",children:"No parent (root category)"}),v.map(e=>(0,t.jsx)(ee,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm",style:{color:e.color},children:e.icon||si(e.type)}),e.name]})},e.id))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(Q,{children:"Icon"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>g(!h),className:"w-12 h-12 p-0",children:d.icon?(0,t.jsx)("span",{className:"text-lg",children:d.icon}):(0,t.jsx)(e6.Z,{className:"h-5 w-5"})}),h&&(0,t.jsx)("div",{className:"absolute z-10 mt-2 p-3 bg-white border rounded-lg shadow-lg grid grid-cols-5 gap-2",children:sa.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{m(s=>({...s,icon:e})),g(!1)},className:"w-8 h-8 text-lg hover:bg-neutral-100 rounded",children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(Q,{children:"Color"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>f(!p),className:"w-12 h-12 p-0",style:{backgroundColor:d.color},children:(0,t.jsx)(e8.Z,{className:"h-5 w-5 text-white"})}),p&&(0,t.jsx)("div",{className:"absolute z-10 mt-2 p-3 bg-white border rounded-lg shadow-lg grid grid-cols-5 gap-2",children:st.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{m(s=>({...s,color:e})),f(!1)},className:"w-8 h-8 rounded border-2 border-neutral-200",style:{backgroundColor:e}},e))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(Q,{children:"Keywords (for auto-categorization)"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)(N.I,{value:x,onChange:e=>u(e.target.value),placeholder:"Add keyword",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),j())}}),(0,t.jsx)(o.z,{type:"button",onClick:j,variant:"outline",children:"Add"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:d.keywords.map(e=>(0,t.jsxs)(ec,{variant:"outline",className:"flex items-center gap-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>y(e),className:"ml-1 hover:bg-neutral-200 rounded p-0.5",children:(0,t.jsx)(E.Z,{className:"h-3 w-3"})})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(Q,{htmlFor:"confidence",children:["Confidence Threshold (",(100*d.confidence_threshold).toFixed(0),"%)"]}),(0,t.jsx)("input",{id:"confidence",type:"range",min:"0.1",max:"1",step:"0.1",value:d.confidence_threshold,onChange:e=>m(s=>({...s,confidence_threshold:parseFloat(e.target.value)})),className:"w-full"}),(0,t.jsx)("p",{className:"text-sm text-neutral-600 mt-1",children:"Minimum confidence level for automatic categorization"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,t.jsxs)(o.z,{type:"submit",disabled:c,children:[c?"Saving...":r?"Update":"Create"," Category"]})]})]})})}let si=e=>{switch(e){case"income":return(0,t.jsx)(e2.Z,{className:"h-4 w-4 text-success-600"});case"expense":return(0,t.jsx)(e5.Z,{className:"h-4 w-4 text-error-600"});case"transfer":return(0,t.jsx)(e3.Z,{className:"h-4 w-4 text-info-600"});default:return(0,t.jsx)(eD.Z,{className:"h-4 w-4 text-neutral-600"})}},sc=e=>{switch(e){case"income":return"success";case"expense":return"destructive";case"transfer":return"default";default:return"secondary"}};function so(e){let{categories:s,selectedCategories:a,onSelectionChange:n,onEdit:r,onDelete:l,onCopy:i,onMerge:c,onPreview:o,onToggleExpand:d,onDragEnd:m,isLoading:x}=e,u=(0,e9.Dy)((0,e9.VT)(e9.we),(0,e9.VT)(e9.Lg,{coordinateGetter:e7.is}));return x?(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-16 bg-neutral-100 animate-pulse rounded-lg"},s))}):(0,t.jsx)(e9.LB,{sensors:u,collisionDetection:e9.pE,onDragEnd:m,children:(0,t.jsx)(e7.Fo,{items:s.map(e=>e.id),strategy:e7.qw,children:(0,t.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,t.jsx)(sr,{category:e,isSelected:a.includes(e.id),onSelect:(e,s)=>{s?n([...a,e]):n(a.filter(s=>s!==e))},onEdit:r,onDelete:l,onCopy:i,onMerge:c,onPreview:o,onToggleExpand:d},e.id))})})})}function sd(e){let{categories:s,selectedCategories:a,onSelectionChange:n,onEdit:r,onDelete:l,onCopy:i,onMerge:c,onPreview:m,isLoading:x}=e;return x?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((e,s)=>(0,t.jsx)("div",{className:"h-32 bg-neutral-100 animate-pulse rounded-lg"},s))}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,t.jsxs)(d.Zb,{className:"p-4 hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(ev,{checked:a.includes(e.id),onChange:s=>{s.target.checked?n([...a,e.id]):n(a.filter(s=>s!==e.id))}}),(0,t.jsx)("div",{className:"w-8 h-8 rounded flex items-center justify-center",style:{backgroundColor:e.color||"#6B7280"},children:(0,t.jsx)("span",{className:"text-white text-sm",children:e.icon||si(e.type)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-neutral-900",children:e.name}),(0,t.jsx)(ec,{variant:sc(e.type),className:"text-xs",children:e.type})]})]})}),e.is_system&&(0,t.jsx)(ec,{variant:"outline",className:"text-xs mb-2",children:"System Category"}),e.keywords&&e.keywords.length>0&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("p",{className:"text-xs text-neutral-600 mb-1",children:"Keywords:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.keywords.slice(0,3).map((e,s)=>(0,t.jsx)(ec,{variant:"outline",className:"text-xs",children:e},s)),e.keywords.length>3&&(0,t.jsxs)(ec,{variant:"outline",className:"text-xs",children:["+",e.keywords.length-3," more"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-3",children:[(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>m(e),className:"h-8 w-8 p-0",children:(0,t.jsx)(e1.Z,{className:"h-4 w-4"})}),(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>i(e),className:"h-8 w-8 p-0",children:(0,t.jsx)(eE.Z,{className:"h-4 w-4"})}),(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>r(e),className:"h-8 w-8 p-0",children:(0,t.jsx)(eT.Z,{className:"h-4 w-4"})}),!e.is_system&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>c(e),className:"h-8 w-8 p-0",children:(0,t.jsx)(e4.Z,{className:"h-4 w-4"})}),(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>l(e),className:"h-8 w-8 p-0 text-error-600 hover:text-error-700 hover:bg-error-50",children:(0,t.jsx)(eR.Z,{className:"h-4 w-4"})})]})]})]},e.id))})}function sm(e){let{categoryStats:s,categorySpending:a,searchTerm:n,isLoading:r}=e;if(r)return(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-20 bg-neutral-100 animate-pulse rounded-lg"},s))});let l=s.filter(e=>e.category.name.toLowerCase().includes(n.toLowerCase()));return(0,t.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,t.jsxs)(d.Zb,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded flex items-center justify-center",style:{backgroundColor:e.category.color||"#6B7280"},children:(0,t.jsx)("span",{className:"text-white text-sm",children:e.category.icon||si(e.category.type)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-neutral-900",children:e.category.name}),(0,t.jsxs)("p",{className:"text-sm text-neutral-600",children:[e.transaction_count," transactions • Avg: ",(0,h.xG)(e.avg_amount)]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-semibold",children:(0,h.xG)(e.total_amount)}),(0,t.jsxs)("p",{className:"text-sm text-neutral-600",children:[e.usage_frequency.toFixed(1)," tx/month"]})]})]}),e.last_used&&(0,t.jsxs)("div",{className:"mt-2 text-sm text-neutral-600",children:["Last used: ",new Date(e.last_used).toLocaleDateString()]})]},e.category.id))})}function sx(e){let{categories:s,onManageRules:a,isLoading:n}=e;return n?(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"h-16 bg-neutral-100 animate-pulse rounded-lg"},s))}):(0,t.jsx)("div",{className:"space-y-3",children:s.map(e=>{var s;return(0,t.jsx)(d.Zb,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded flex items-center justify-center",style:{backgroundColor:e.color||"#6B7280"},children:(0,t.jsx)("span",{className:"text-white text-sm",children:e.icon||si(e.type)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium text-neutral-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-neutral-600",children:[(null===(s=e.rules)||void 0===s?void 0:s.length)||0," rules • Confidence: ",(100*(e.confidence_threshold||.8)).toFixed(0),"%"]})]})]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>a(e),children:[(0,t.jsx)(e$.Z,{className:"h-4 w-4 mr-1"}),"Manage Rules"]})]})},e.id)})})}function su(e){let{isOpen:s,onClose:a,category:n}=e;return(0,t.jsx)(eK,{isOpen:s,onClose:a,title:"Manage Category Rules",size:"lg",children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("p",{className:"text-neutral-600",children:['Configure rules for automatic categorization of transactions for "',null==n?void 0:n.name,'"']})})})}function sh(e){let{isOpen:s,onClose:a,onImport:n}=e;return(0,t.jsx)(eK,{isOpen:s,onClose:a,title:"Import Categories",children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsx)("p",{className:"text-neutral-600",children:"Import categories from a CSV or JSON file"})})})}function sg(e){let{isOpen:s,onClose:a,sourceCategory:n,categories:r,onMerge:l,isLoading:i}=e;return(0,t.jsx)(eK,{isOpen:s,onClose:a,title:"Merge Categories",children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("p",{className:"text-neutral-600",children:['Merge "',null==n?void 0:n.name,'" into another category. All transactions will be moved.']})})})}function sp(e){let{isOpen:s,onClose:a,category:n}=e;return(0,t.jsx)(eK,{isOpen:s,onClose:a,title:"Category Preview",children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("p",{className:"text-neutral-600",children:['Preview transactions in "',null==n?void 0:n.name,'" category']})})})}var sf=a(15737),sj=a(31671),sy=a(64102),sv=a(65739),sN=a(15574),sw=a(44034),sb=a(33545),sC=a(62498),sk=a(62155),s_=a(86879);let sS=s_.fC;s_.xz;let sz=s_.h_,sD=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(s_.aV,{className:(0,h.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n,ref:s})});sD.displayName=s_.aV.displayName;let sZ=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsxs)(sz,{children:[(0,t.jsx)(sD,{}),(0,t.jsx)(s_.VY,{ref:s,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n})]})});sZ.displayName=s_.VY.displayName;let sF=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};sF.displayName="AlertDialogHeader";let sM=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};sM.displayName="AlertDialogFooter";let sT=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(s_.Dx,{ref:s,className:(0,h.cn)("text-lg font-semibold",a),...n})});sT.displayName=s_.Dx.displayName;let sE=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(s_.dk,{ref:s,className:(0,h.cn)("text-sm text-muted-foreground",a),...n})});sE.displayName=s_.dk.displayName;let sR=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(s_.aU,{ref:s,className:(0,h.cn)((0,o.d)(),a),...n})});sR.displayName=s_.aU.displayName;let sA=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(s_.$j,{ref:s,className:(0,h.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...n})});sA.displayName=s_.$j.displayName;var sU=a(41355);let sL=n.forwardRef((e,s)=>{let{className:a,value:n,...r}=e;return(0,t.jsx)(sU.fC,{ref:s,className:(0,h.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...r,children:(0,t.jsx)(sU.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});sL.displayName=sU.fC.displayName;var sP=a(89951);function sV(e){let{selectedTransactions:s,onClearSelection:a,onCategorize:r,onTransactionsUpdated:i,className:m}=e,x=(0,l.NL)(),u=(0,ss.PM)(),g=(0,ss.cM)(),[p,f]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),[v,N]=(0,n.useState)(null),[w,b]=(0,n.useState)(!1),[C,k]=(0,n.useState)([]),Z=(0,c.D)({mutationFn:async e=>{let{updates:s,transactionIds:a}=e;return eW.bulkUpdateTransactions({transaction_ids:a,updates:s})},onSuccess:e=>{x.invalidateQueries({queryKey:["transactions"]}),x.invalidateQueries({queryKey:["transaction-stats"]}),i(e)}}),T=(0,c.D)({mutationFn:async e=>{let a=s.slice();return k(e=>[...e,{operation:"delete",transactions:a,timestamp:new Date}]),Promise.all(e.map(e=>eW.deleteTransaction(e)))},onSuccess:()=>{x.invalidateQueries({queryKey:["transactions"]}),x.invalidateQueries({queryKey:["transaction-stats"]}),u("Transactions Deleted","Successfully deleted ".concat(s.length," transactions")),a()},onError:e=>{g("Delete Failed",e.message||"Failed to delete transactions")}}),R=(0,c.D)({mutationFn:async e=>{let a={transaction_ids:s.map(e=>e.id)};return eW.exportTransactions(a,e)},onSuccess:(e,a)=>{u("Export Complete","".concat(s.length," transactions exported as ").concat(a.toUpperCase()))},onError:e=>{g("Export Failed",e.message||"Failed to export transactions")}}),A=(0,n.useMemo)(()=>{let e=s.reduce((e,s)=>e+s.amount,0),a=s.filter(e=>e.amount>0).reduce((e,s)=>e+s.amount,0),t=s.filter(e=>e.amount<0).reduce((e,s)=>e+Math.abs(s.amount),0),n=new Set(s.map(e=>e.account_id)).size,r=s.length>0?{start:new Date(Math.min(...s.map(e=>new Date(e.date).getTime()))),end:new Date(Math.max(...s.map(e=>new Date(e.date).getTime())))}:null,l=s.filter(e=>!e.category_id).length,i=s.filter(e=>e.is_pending).length;return{count:s.length,totalAmount:e,incomeAmount:a,expenseAmount:t,accounts:n,dateRange:r,uncategorized:l,pending:i}},[s]),U=(0,n.useMemo)(()=>{if(s.length<2)return[];let e=[],a=Object.entries(s.reduce((e,s)=>{let a=s.merchant_name||"Unknown";return e[a]=(e[a]||0)+1,e},{})).sort((e,s)=>{let[,a]=e,[,t]=s;return t-a})[0];a&&a[1]>1&&e.push({type:"merchant",title:"All from ".concat(a[0]),description:"".concat(a[1]," transactions from the same merchant"),count:a[1],icon:(0,t.jsx)(sf.Z,{className:"h-4 w-4"}),action:()=>{console.log("Filter by merchant:",a[0])}});let n=Object.entries(s.reduce((e,s)=>{let a=Math.round(Math.abs(s.amount));return e[a]=(e[a]||0)+1,e},{})).sort((e,s)=>{let[,a]=e,[,t]=s;return t-a})[0];n&&n[1]>1&&e.push({type:"amount",title:"Similar amounts (~".concat((0,h.xG)(Number(n[0])),")"),description:"".concat(n[1]," transactions with similar amounts"),count:n[1],icon:(0,t.jsx)(eH.Z,{className:"h-4 w-4"}),action:()=>{console.log("Filter by amount:",n[0])}});let r=s.filter(e=>(0,sP.k)(new Date(e.date))).length;return r>.8*s.length&&e.push({type:"date",title:"Recent transactions",description:"".concat(r," transactions from this month"),count:r,icon:(0,t.jsx)(ez.Z,{className:"h-4 w-4"}),action:()=>{console.log("Focus on recent transactions")}}),e},[s]),L=(0,n.useCallback)(async e=>{try{N({isRunning:!0,operation:e?"Marking as reviewed":"Marking as unreviewed",completed:0,total:s.length,errors:[],startTime:new Date}),await Z.mutateAsync({updates:{notes:e?"reviewed":void 0},transactionIds:s.map(e=>e.id)}),N(null),u(e?"Marked as Reviewed":"Marked as Unreviewed","".concat(s.length," transactions updated")),a()}catch(e){N(null),g("Update Failed",e.message||"Failed to update transactions")}},[s,Z,u,g,a]),P=(0,n.useCallback)(async()=>{try{N({isRunning:!0,operation:"Deleting transactions",completed:0,total:s.length,errors:[],startTime:new Date}),await T.mutateAsync(s.map(e=>e.id)),N(null),f(!1)}catch(e){N(null)}},[s,T]),V=(0,n.useCallback)(async e=>{try{await R.mutateAsync(e),y(!1)}catch(e){}},[R]),I=(0,n.useCallback)(()=>{if(0===C.length)return;let e=C[C.length-1];k(e=>e.slice(0,-1)),u("Undo Available","".concat(e.operation," operation can be undone (feature coming soon)"))},[C,u]);return 0===s.length?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Zb,{className:(0,h.cn)("border-primary-200 bg-primary-50/50",m),children:(0,t.jsx)(d.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[v&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:"font-medium",children:[v.operation,"..."]}),(0,t.jsxs)("span",{children:[v.completed,"/",v.total]})]}),(0,t.jsx)(sL,{value:v.completed/v.total*100,className:"h-2"}),v.errors.length>0&&(0,t.jsxs)("div",{className:"text-xs text-error-600",children:[v.errors.length," errors occurred"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(ec,{variant:"default",className:"text-sm",children:[A.count," selected"]}),(0,t.jsxs)("div",{className:"text-sm text-neutral-600",children:[(0,t.jsx)("span",{className:"font-medium",children:(0,h.xG)(A.totalAmount)}),A.accounts>1&&(0,t.jsxs)("span",{className:"ml-2",children:["• ",A.accounts," accounts"]})]})]}),A.incomeAmount>0&&A.expenseAmount>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[(0,t.jsxs)("span",{className:"text-success-600",children:["+",(0,h.xG)(A.incomeAmount)]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{className:"text-error-600",children:["-",(0,h.xG)(A.expenseAmount)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[A.uncategorized>0&&(0,t.jsxs)(eb,{children:[(0,t.jsx)(eC,{children:(0,t.jsxs)(ec,{variant:"outline",className:"text-xs",children:[A.uncategorized," uncategorized"]})}),(0,t.jsxs)(ek,{children:[A.uncategorized," transactions need categorization"]})]}),A.pending>0&&(0,t.jsxs)(eb,{children:[(0,t.jsx)(eC,{children:(0,t.jsxs)(ec,{variant:"secondary",className:"text-xs",children:[A.pending," pending"]})}),(0,t.jsxs)(ek,{children:[A.pending," transactions are still pending"]})]})]}),U.length>0&&(0,t.jsxs)(_,{open:w,onOpenChange:b,children:[(0,t.jsx)(S,{asChild:!0,children:(0,t.jsxs)(o.z,{variant:"ghost",size:"sm",className:"h-7",children:[(0,t.jsx)(sj.Z,{className:"h-4 w-4 mr-1"}),U.length," suggestion",1!==U.length?"s":""]})}),(0,t.jsxs)(z,{align:"start",className:"w-80",children:[(0,t.jsx)(F,{children:"Smart Suggestions"}),(0,t.jsx)(M,{}),U.map((e,s)=>(0,t.jsxs)(D,{onClick:e.action,className:"flex items-start gap-3 py-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium",children:e.title}),(0,t.jsx)("div",{className:"text-xs text-neutral-500",children:e.description})]})]},s))]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:r,disabled:Z.isPending,children:[(0,t.jsx)(eD.Z,{className:"h-4 w-4 mr-1"}),"Categorize"]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>L(!0),disabled:Z.isPending,children:[(0,t.jsx)(sy.Z,{className:"h-4 w-4 mr-1"}),"Mark Reviewed"]}),(0,t.jsxs)(_,{children:[(0,t.jsx)(S,{asChild:!0,children:(0,t.jsxs)(o.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(sv.Z,{className:"h-4 w-4 mr-1"}),"More Actions"]})}),(0,t.jsxs)(z,{align:"end",children:[(0,t.jsx)(F,{children:"Bulk Actions"}),(0,t.jsx)(M,{}),(0,t.jsxs)(D,{onClick:()=>y(!0),children:[(0,t.jsx)(eJ.Z,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),(0,t.jsxs)(D,{onClick:()=>L(!1),children:[(0,t.jsx)(sN.Z,{className:"h-4 w-4 mr-2"}),"Mark Unreviewed"]}),(0,t.jsxs)(D,{onClick:()=>{L(!0)},children:[(0,t.jsx)(sw.Z,{className:"h-4 w-4 mr-2"}),"Archive"]}),(0,t.jsx)(M,{}),(0,t.jsxs)(D,{onClick:()=>f(!0),className:"text-error-600 focus:text-error-600",children:[(0,t.jsx)(sb.Z,{className:"h-4 w-4 mr-2"}),"Delete Selected"]})]})]}),C.length>0&&(0,t.jsxs)(eb,{children:[(0,t.jsx)(eC,{asChild:!0,children:(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:I,className:"h-8 w-8 p-0",children:(0,t.jsx)(sC.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(ek,{children:"Undo last operation"})]}),(0,t.jsx)(o.z,{variant:"ghost",size:"sm",onClick:a,className:"h-8 w-8 p-0",children:(0,t.jsx)(E.Z,{className:"h-4 w-4"})})]})]}),A.dateRange&&(0,t.jsx)("div",{className:"text-xs text-neutral-500",children:A.dateRange.start.getTime()===A.dateRange.end.getTime()?"".concat((0,ef.WU)(A.dateRange.start,"MMM d, yyyy")):"".concat((0,ef.WU)(A.dateRange.start,"MMM d")," - ").concat((0,ef.WU)(A.dateRange.end,"MMM d, yyyy"))})]})})}),(0,t.jsx)(sS,{open:p,onOpenChange:f,children:(0,t.jsxs)(sZ,{children:[(0,t.jsxs)(sF,{children:[(0,t.jsxs)(sT,{className:"flex items-center gap-2",children:[(0,t.jsx)(sk.Z,{className:"h-5 w-5 text-error-600"}),"Delete ",s.length," Transaction",1!==s.length?"s":"","?"]}),(0,t.jsxs)(sE,{className:"space-y-2",children:[(0,t.jsx)("p",{children:"This action cannot be undone. The following transactions will be permanently deleted:"}),(0,t.jsxs)("div",{className:"bg-neutral-50 rounded-lg p-3 space-y-1 max-h-32 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[A.count," transactions • ",(0,h.xG)(A.totalAmount)]}),A.dateRange&&(0,t.jsxs)("div",{className:"text-xs text-neutral-500",children:[(0,ef.WU)(A.dateRange.start,"MMM d")," - ",(0,ef.WU)(A.dateRange.end,"MMM d, yyyy")]}),A.accounts>1&&(0,t.jsxs)("div",{className:"text-xs text-neutral-500",children:["Across ",A.accounts," accounts"]})]})]})]}),(0,t.jsxs)(sM,{children:[(0,t.jsx)(sA,{children:"Cancel"}),(0,t.jsx)(sR,{onClick:P,className:"bg-error-600 hover:bg-error-700",disabled:T.isPending,children:T.isPending?"Deleting...":"Delete Transactions"})]})]})}),(0,t.jsx)(sS,{open:j,onOpenChange:y,children:(0,t.jsxs)(sZ,{children:[(0,t.jsxs)(sF,{children:[(0,t.jsxs)(sT,{className:"flex items-center gap-2",children:[(0,t.jsx)(eF.Z,{className:"h-5 w-5"}),"Export ",s.length," Transaction",1!==s.length?"s":""]}),(0,t.jsx)(sE,{children:"Choose the format for exporting your selected transactions."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 py-4",children:[(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>V("csv"),disabled:R.isPending,className:"h-20 flex-col",children:[(0,t.jsx)(eF.Z,{className:"h-6 w-6 mb-2"}),"CSV File",(0,t.jsx)("span",{className:"text-xs text-neutral-500",children:"Spreadsheet compatible"})]}),(0,t.jsxs)(o.z,{variant:"outline",onClick:()=>V("xlsx"),disabled:R.isPending,className:"h-20 flex-col",children:[(0,t.jsx)(eF.Z,{className:"h-6 w-6 mb-2"}),"Excel File",(0,t.jsx)("span",{className:"text-xs text-neutral-500",children:"Full formatting"})]})]}),(0,t.jsx)(sM,{children:(0,t.jsx)(sA,{children:"Cancel"})})]})})]})}var sI=a(9263),sK=a(68348),sq=a(38024),sO=a(80132),sQ=a(83910);function sW(e){let{icon:s,title:a,description:n,actionText:r,onAction:l}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(s,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4 max-w-sm",children:n}),r&&l&&(0,t.jsx)(o.z,{onClick:l,children:r})]})}function sB(e){let{title:s,value:a,icon:n,trend:r,color:l="default",isLoading:i=!1}=e;return(0,t.jsx)(d.Zb,{children:(0,t.jsx)(d.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-neutral-600",children:s}),i?(0,t.jsx)("div",{className:"h-8 w-24 bg-neutral-200 animate-pulse rounded"}):(0,t.jsx)("p",{className:"text-2xl font-bold ".concat({default:"text-neutral-600",success:"text-success-600",error:"text-error-600",warning:"text-warning-600"}[l]),children:a})]}),(0,t.jsx)("div",{className:"p-3 rounded-full bg-neutral-50 ".concat({default:"text-neutral-500",success:"text-success-500",error:"text-error-500",warning:"text-warning-500"}[l]),children:(0,t.jsx)(n,{className:"h-6 w-6"})})]})})})}let sG={date_from:(0,ef.WU)((0,eu.N)(new Date),"yyyy-MM-dd"),date_to:(0,ef.WU)((0,eh.V)(new Date),"yyyy-MM-dd")};function sY(){let e=(0,l.NL)(),s=(0,ss.PM)(),a=(0,ss.cM)(),[x,u]=(0,n.useState)(sG),[g,p]=(0,n.useState)([]),[f,j]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),[N,w]=(0,n.useState)([]),[b,C]=(0,n.useState)(!1),[k,Z]=(0,n.useState)(!1),{data:T,isLoading:E,error:R}=(0,i.a)({queryKey:["transactions",x],queryFn:()=>eW.getTransactions(x)}),{data:A=[],isLoading:U}=(0,i.a)({queryKey:["accounts"],queryFn:sQ.S.getAccounts}),{data:L=[],isLoading:P}=(0,i.a)({queryKey:["categories"],queryFn:eQ.getCategories}),{data:V,isLoading:I}=(0,i.a)({queryKey:["transaction-stats",x],queryFn:()=>eW.getTransactionStats({date_from:x.date_from,date_to:x.date_to,account_id:x.account_id})});(0,c.D)({mutationFn:e=>{let{id:s,updates:a}=e;return eW.updateTransaction(s,a)},onSuccess:()=>{e.invalidateQueries({queryKey:["transactions"]}),e.invalidateQueries({queryKey:["transaction-stats"]}),s("Transaction Updated","The transaction has been updated successfully")},onError:e=>{a("Update Failed",e.message||"Failed to update transaction")}});let K=(0,c.D)({mutationFn:eW.deleteTransaction,onSuccess:()=>{e.invalidateQueries({queryKey:["transactions"]}),e.invalidateQueries({queryKey:["transaction-stats"]}),s("Transaction Deleted","The transaction has been deleted successfully")},onError:e=>{a("Delete Failed",e.message||"Failed to delete transaction")}});(0,c.D)({mutationFn:e=>eW.categorizeTransactions(e),onSuccess:a=>{e.invalidateQueries({queryKey:["transactions"]}),e.invalidateQueries({queryKey:["transaction-stats"]}),s("Categorization Complete","Successfully categorized ".concat(a.categorized_count," transactions"))},onError:e=>{a("Categorization Failed",e.message||"Failed to categorize transactions")}});let O=(0,n.useCallback)(async()=>{j(!0);try{await eW.syncTransactions(),await e.invalidateQueries({queryKey:["transactions"]}),await e.invalidateQueries({queryKey:["transaction-stats"]}),s("Sync Complete","Transactions have been synced successfully")}catch(e){a("Sync Failed",e.message||"Failed to sync transactions")}finally{j(!1)}},[e,s,a]),Q=(0,n.useCallback)(async e=>{try{await eW.exportTransactions(x,e),s("Export Complete","Transactions exported as ".concat(e.toUpperCase()))}catch(e){a("Export Failed",e.message||"Failed to export transactions")}},[x,s,a]),W=(0,n.useCallback)(e=>{console.log("Edit transaction:",e)},[]),B=(0,n.useCallback)(e=>{confirm("Are you sure you want to delete this transaction?")&&K.mutate(e.id)},[K]),G=(0,n.useCallback)(e=>{w([e]),v(!0)},[]),Y=(0,n.useCallback)(()=>{if(0===g.length){a("No Selection","Please select transactions to categorize");return}w(g),v(!0)},[g,a]),H=(0,n.useCallback)(()=>{p([]),Z(!1)},[]),$=(0,n.useCallback)(e=>{p(e),Z(e.length>0)},[]),J=(0,n.useCallback)(()=>{u(sG)},[]),X=(0,n.useCallback)(()=>{v(!1),w([])},[]),ee=(0,n.useCallback)(s=>{e.invalidateQueries({queryKey:["transactions"]}),e.invalidateQueries({queryKey:["transaction-stats"]})},[e]),es=(0,n.useMemo)(()=>(null==T?void 0:T.transactions)||[],[T]),ea=(0,n.useMemo)(()=>(null==T?void 0:T.total)||0,[T]);n.useEffect(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"a"===e.key&&(e.preventDefault(),es&&es.length>0&&(p(es),Z(!0),s("All Visible Transactions Selected","Selected ".concat(es.length," transactions")))),"Escape"===e.key&&g.length>0&&(H(),s("Selection Cleared","All transactions deselected")),(e.metaKey||e.ctrlKey)&&e.shiftKey&&"C"===e.key&&(e.preventDefault(),g.length>0&&Y())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[es,g,H,Y,s]);let et=(0,n.useMemo)(()=>(function(e){let{accounts:s,categories:a,onEdit:n,onDelete:r,onCategorize:l,onDuplicate:i,onViewDetails:c}=e;return[{id:"select",header:e=>{let{table:s}=e;return(0,t.jsx)(ev,{checked:s.getIsAllPageRowsSelected(),onCheckedChange:e=>s.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:s}=e;return(0,t.jsx)(ev,{checked:s.getIsSelected(),onCheckedChange:e=>s.toggleSelected(!!e),"aria-label":"Select row","data-no-row-click":!0})},enableSorting:!1,enableHiding:!1},{accessorKey:"date",header:"Date",cell:e=>{let{row:s}=e,a=(0,ep.D)(s.getValue("date"));return(0,t.jsxs)("div",{className:"whitespace-nowrap",children:[(0,t.jsx)("div",{className:"font-medium",children:(0,ef.WU)(a,"MMM d, yyyy")}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,ef.WU)(a,"EEEE")})]})},sortingFn:"datetime"},{accessorKey:"description",header:"Description",cell:e=>{let{row:s}=e,a=s.original,n=a.amount>0;return(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:(0,h.cn)("mt-1 p-1 rounded",n?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:n?(0,t.jsx)(e_.Z,{className:"h-3 w-3"}):(0,t.jsx)(eS.Z,{className:"h-3 w-3"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium truncate",children:a.description}),a.merchant_name&&a.merchant_name!==a.description&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:a.merchant_name})]}),a.is_pending&&(0,t.jsx)(ew,{children:(0,t.jsxs)(eb,{children:[(0,t.jsx)(eC,{children:(0,t.jsx)(ez.Z,{className:"h-4 w-4 text-amber-500"})}),(0,t.jsx)(ek,{children:(0,t.jsx)("p",{children:"Pending transaction"})})]})})]})}},{id:"category",header:"Category",accessorFn:e=>e.category||"Uncategorized",cell:e=>{let{row:s}=e,n=s.original,r=n.category_id?a.find(e=>e.id===n.category_id):null;return r?(0,t.jsxs)(ec,{variant:"outline",className:"cursor-pointer",onClick:e=>{e.stopPropagation(),l&&l(n)},"data-no-row-click":!0,children:[r.icon&&(0,t.jsx)("span",{className:"mr-1",children:r.icon}),r.name,n.subcategory&&(0,t.jsxs)("span",{className:"ml-1 text-xs text-muted-foreground",children:["/ ",n.subcategory]})]}):(0,t.jsxs)(o.z,{variant:"ghost",size:"sm",className:"h-7 text-xs text-muted-foreground hover:text-foreground",onClick:e=>{e.stopPropagation(),l&&l(n)},"data-no-row-click":!0,children:[(0,t.jsx)(eD.Z,{className:"mr-1 h-3 w-3"}),"Add category"]})},filterFn:(e,s,a)=>"Uncategorized"===a?!e.original.category_id:e.original.category_id===a},{accessorKey:"account_id",header:"Account",cell:e=>{let{row:a}=e,n=s.find(e=>e.id===a.getValue("account_id"));return n?(0,t.jsxs)("div",{className:"whitespace-nowrap",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:n.name}),n.mask&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["•••• ",n.mask]})]}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"Unknown"})},filterFn:(e,s,a)=>e.getValue(s)===a},{accessorKey:"amount",header:e=>{let{column:s}=e;return(0,t.jsx)(o.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),className:"hover:bg-transparent p-0",children:"Amount"})},cell:e=>{let{row:s}=e,a=parseFloat(s.getValue("amount")),n=a>0;return(0,t.jsxs)("div",{className:(0,h.cn)("font-mono font-semibold text-right whitespace-nowrap",n?"text-green-600":"text-red-600"),children:[n?"+":"-","$",Math.abs(a).toFixed(2)]})},sortingFn:"basic"},{id:"status",header:"Status",cell:e=>{let{row:s}=e,a=s.original;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[a.is_pending?(0,t.jsxs)(ec,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(ez.Z,{className:"mr-1 h-3 w-3"}),"Pending"]}):(0,t.jsxs)(ec,{variant:"outline",className:"text-xs",children:[(0,t.jsx)(eZ.Z,{className:"mr-1 h-3 w-3"}),"Posted"]}),a.notes&&(0,t.jsx)(ew,{children:(0,t.jsxs)(eb,{children:[(0,t.jsx)(eC,{children:(0,t.jsx)(eF.Z,{className:"h-3 w-3 text-muted-foreground"})}),(0,t.jsx)(ek,{children:(0,t.jsx)("p",{className:"max-w-xs",children:a.notes})})]})})]})}},{id:"actions",enableHiding:!1,cell:e=>{let{row:s}=e,a=s.original;return(0,t.jsxs)(_,{children:[(0,t.jsx)(S,{asChild:!0,children:(0,t.jsxs)(o.z,{variant:"ghost",className:"h-8 w-8 p-0","data-no-row-click":!0,children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(eM.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(z,{align:"end",children:[(0,t.jsx)(F,{children:"Actions"}),(0,t.jsxs)(D,{onClick:()=>c&&c(a),children:[(0,t.jsx)(eF.Z,{className:"mr-2 h-4 w-4"}),"View details"]}),(0,t.jsxs)(D,{onClick:()=>n&&n(a),children:[(0,t.jsx)(eT.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,t.jsxs)(D,{onClick:()=>l&&l(a),children:[(0,t.jsx)(eD.Z,{className:"mr-2 h-4 w-4"}),"Categorize"]}),(0,t.jsxs)(D,{onClick:()=>i&&i(a),children:[(0,t.jsx)(eE.Z,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),(0,t.jsx)(M,{}),(0,t.jsxs)(D,{onClick:()=>r&&r(a),className:"text-red-600",children:[(0,t.jsx)(eR.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}}]})({accounts:A,categories:L,onEdit:W,onDelete:B,onCategorize:G}),[A,L,W,B,G]),en=E||U||P,er=!en&&0===es.length&&!R;return(0,t.jsxs)(r.c,{title:"Transactions",description:"View and manage all your financial transactions across all accounts",children:[(0,t.jsxs)("div",{className:"space-y-6 relative",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-neutral-900",children:"All Transactions"}),(0,t.jsxs)("p",{className:"text-sm text-neutral-600 mt-1",children:[ea.toLocaleString()," total transactions",x.date_from&&x.date_to&&(0,t.jsxs)("span",{className:"ml-1",children:["from ",(0,ef.WU)(new Date(x.date_from),"MMM d")," to ",(0,ef.WU)(new Date(x.date_to),"MMM d, yyyy")]}),g.length>0&&(0,t.jsxs)("span",{className:"ml-2 text-primary-600 font-medium",children:["• ",g.length," selected"]})]}),g.length>0&&(0,t.jsxs)("div",{className:"text-xs text-neutral-500 mt-1",children:["Keyboard shortcuts: ",(0,t.jsx)("kbd",{className:"px-1 py-0.5 bg-neutral-100 rounded text-xs",children:"Cmd+A"})," select all,",(0,t.jsx)("kbd",{className:"px-1 py-0.5 bg-neutral-100 rounded text-xs",children:"Esc"})," clear,",(0,t.jsx)("kbd",{className:"px-1 py-0.5 bg-neutral-100 rounded text-xs",children:"Cmd+Shift+C"})," categorize"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>Q("csv"),disabled:0===es.length,children:[(0,t.jsx)(eJ.Z,{className:"h-4 w-4 mr-1"}),"Export"]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:()=>C(!0),children:[(0,t.jsx)(sI.Z,{className:"h-4 w-4 mr-1"}),"Manage Categories"]}),(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:O,disabled:f,children:[f?(0,t.jsx)(m.gb,{size:"sm",className:"mr-1"}):(0,t.jsx)(sK.Z,{className:"h-4 w-4 mr-1"}),"Sync"]}),(0,t.jsxs)(o.z,{size:"sm",children:[(0,t.jsx)(eI.Z,{className:"h-4 w-4 mr-1"}),"Add Transaction"]})]})]}),V&&(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(sB,{title:"Total Income",value:(0,h.xG)(V.total_income),icon:e2.Z,color:"success",isLoading:I}),(0,t.jsx)(sB,{title:"Total Expenses",value:(0,h.xG)(Math.abs(V.total_expenses)),icon:e5.Z,color:"error",isLoading:I}),(0,t.jsx)(sB,{title:"Net Income",value:(0,h.xG)(V.net_income),icon:em.Z,color:V.net_income>=0?"success":"error",isLoading:I}),(0,t.jsx)(sB,{title:"Avg Transaction",value:(0,h.xG)(V.avg_transaction_amount),icon:sq.Z,isLoading:I})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"pb-4",children:[(0,t.jsx)(d.ll,{className:"text-lg",children:"Filters"}),(0,t.jsx)(d.SZ,{children:"Filter and search through your transactions"})]}),(0,t.jsx)(d.aY,{children:(0,t.jsx)(ey,{filters:x,onFiltersChange:u,accounts:A,categories:L,onReset:J})})]}),g.length>0&&(0,t.jsx)("div",{className:"sticky top-4 z-10",children:(0,t.jsx)(sV,{selectedTransactions:g,onClearSelection:H,onCategorize:Y,onTransactionsUpdated:ee})}),k&&g.length>0&&(0,t.jsx)("div",{className:"fixed bottom-6 right-6 z-20 md:hidden",children:(0,t.jsx)(o.z,{onClick:Y,className:"h-14 w-14 rounded-full shadow-lg",size:"sm",children:(0,t.jsx)(Tag,{className:"h-6 w-6"})})}),R?(0,t.jsx)(d.Zb,{children:(0,t.jsx)(d.aY,{className:"py-12",children:(0,t.jsx)(sW,{icon:eL.Z,title:"Error Loading Transactions",description:R.message||"Failed to load transactions",actionText:"Try Again",onAction:O})})}):er?(0,t.jsx)(d.Zb,{children:(0,t.jsx)(d.aY,{className:"py-12",children:(0,t.jsx)(sW,{icon:x.date_from||x.account_id?eF.Z:sO.Z,title:x.date_from||x.account_id?"No Transactions Found":"No Transactions Yet",description:x.date_from||x.account_id?"No transactions match your current filters. Try adjusting your search criteria.":"You don't have any transactions yet. Connect your accounts to start tracking.",actionText:x.date_from||x.account_id?"Clear Filters":"Connect Account",onAction:()=>x.date_from||x.account_id?J():window.location.href="/accounts"})})}):(0,t.jsx)(d.Zb,{className:"overflow-hidden",children:(0,t.jsx)(q,{columns:et,data:es,onRowSelectionChange:$,onRowClick:e=>G(e),searchKey:"description",searchPlaceholder:"Search by description or merchant...",showColumnToggle:!0,showPagination:!0,pageSize:50,isLoading:en||f,emptyMessage:"No transactions found matching your filters.",className:"border-0"})})]}),(0,t.jsx)(eG,{isOpen:y,onClose:X,transactions:N,onTransactionsUpdated:ee}),(0,t.jsx)(sn,{isOpen:b,onClose:()=>C(!1)})]})}}},function(e){e.O(0,[351,868,583,102,744],function(){return e(e.s=60024)}),_N_E=e.O()}]);