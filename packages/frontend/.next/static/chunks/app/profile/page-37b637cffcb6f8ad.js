(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{18011:function(e,s,a){Promise.resolve().then(a.bind(a,8508))},8508:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return v}});var r=a(27573),t=a(7653),l=a(93351),n=a(18113),d=a(28204),i=a(50221),c=a(45118),o=a(50466),m=a(39134),x=a(72196),u=a(75330),h=a(61569);let j=(0,a(2389).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var w=a(47686),f=a(70844),N=a(38333),p=a(45249);let g=d.Ry({firstName:d.Z_().min(2,"First name must be at least 2 characters"),lastName:d.Z_().min(2,"Last name must be at least 2 characters"),email:d.Z_().email("Please enter a valid email address")}),b=d.Ry({currentPassword:d.Z_().min(1,"Current password is required"),newPassword:d.Z_().min(8,"Password must be at least 8 characters").regex(/(?=.*[a-z])/,"Password must contain at least one lowercase letter").regex(/(?=.*[A-Z])/,"Password must contain at least one uppercase letter").regex(/(?=.*\d)/,"Password must contain at least one number"),confirmPassword:d.Z_()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});var v=(0,i.QO)(function(){var e,s,a,d,v,y;let{user:P,refetch:S}=(0,i.aC)(),[Z,I]=t.useState(!1),[F,_]=t.useState(!1),[k,C]=t.useState(!1),[E,T]=t.useState(!1),[U,z]=t.useState(!1),[A,L]=t.useState(""),[O,D]=t.useState(""),M=(0,l.cI)({resolver:(0,n.F)(g),defaultValues:{firstName:(null==P?void 0:P.firstName)||"",lastName:(null==P?void 0:P.lastName)||"",email:(null==P?void 0:P.email)||""}}),Y=(0,l.cI)({resolver:(0,n.F)(b)});t.useEffect(()=>{P&&M.reset({firstName:P.firstName||"",lastName:P.lastName||"",email:P.email||""})},[P,M]);let R=async e=>{T(!0),L("");try{await c.hi.put("/api/v1/users/me",e),await S(),L("Profile updated successfully!"),setTimeout(()=>L(""),5e3)}catch(e){M.setError("root",{message:e.message||"Failed to update profile. Please try again."})}finally{T(!1)}},V=async e=>{z(!0),D("");try{await c.hi.put("/api/v1/users/me/password",{currentPassword:e.currentPassword,newPassword:e.newPassword}),Y.reset(),D("Password updated successfully!"),setTimeout(()=>D(""),5e3)}catch(e){Y.setError("root",{message:e.message||"Failed to update password. Please try again."})}finally{z(!1)}},H=Y.watch("newPassword");return P?(0,r.jsxs)("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Account Settings"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your account information and security settings"})]}),(0,r.jsxs)("div",{className:"grid gap-8",children:[(0,r.jsxs)(x.Zb,{children:[(0,r.jsx)(x.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"h-16 w-16 rounded-full bg-primary-100 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl font-semibold text-primary-700",children:(0,p.Qm)("".concat(P.firstName," ").concat(P.lastName))})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x.ll,{children:"Profile Information"}),(0,r.jsx)(x.SZ,{children:"Update your personal details"})]})]})}),(0,r.jsx)(x.aY,{children:(0,r.jsxs)("form",{onSubmit:M.handleSubmit(R),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"firstName",className:"form-label",children:"First name"}),(0,r.jsx)(m.I,{id:"firstName",type:"text",placeholder:"First name",startIcon:(0,r.jsx)(u.Z,{className:"h-4 w-4"}),error:!!M.formState.errors.firstName,helperText:null===(e=M.formState.errors.firstName)||void 0===e?void 0:e.message,...M.register("firstName")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lastName",className:"form-label",children:"Last name"}),(0,r.jsx)(m.I,{id:"lastName",type:"text",placeholder:"Last name",startIcon:(0,r.jsx)(u.Z,{className:"h-4 w-4"}),error:!!M.formState.errors.lastName,helperText:null===(s=M.formState.errors.lastName)||void 0===s?void 0:s.message,...M.register("lastName")})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email address"}),(0,r.jsx)(m.I,{id:"email",type:"email",placeholder:"Email address",startIcon:(0,r.jsx)(h.Z,{className:"h-4 w-4"}),error:!!M.formState.errors.email,helperText:null===(a=M.formState.errors.email)||void 0===a?void 0:a.message,...M.register("email")})]}),A&&(0,r.jsx)("div",{className:"text-sm text-success-600 bg-success-50 border border-success-200 rounded-md p-3",children:A}),M.formState.errors.root&&(0,r.jsx)("div",{className:"text-sm text-error-600 bg-error-50 border border-error-200 rounded-md p-3",children:M.formState.errors.root.message}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(o.z,{type:"submit",loading:E,disabled:E,className:"w-full md:w-auto",children:[(0,r.jsx)(j,{className:"mr-2 h-4 w-4"}),E?"Saving...":"Save changes"]})})]})})]}),(0,r.jsxs)(x.Zb,{children:[(0,r.jsx)(x.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-100 flex items-center justify-center",children:(0,r.jsx)(w.Z,{className:"h-6 w-6 text-gray-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(x.ll,{children:"Change Password"}),(0,r.jsx)(x.SZ,{children:"Update your password to keep your account secure"})]})]})}),(0,r.jsx)(x.aY,{children:(0,r.jsxs)("form",{onSubmit:Y.handleSubmit(V),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"currentPassword",className:"form-label",children:"Current password"}),(0,r.jsx)(m.I,{id:"currentPassword",type:Z?"text":"password",placeholder:"Enter current password",startIcon:(0,r.jsx)(w.Z,{className:"h-4 w-4"}),endIcon:(0,r.jsx)("button",{type:"button",onClick:()=>I(!Z),className:"text-neutral-400 hover:text-neutral-600",children:Z?(0,r.jsx)(f.Z,{className:"h-4 w-4"}):(0,r.jsx)(N.Z,{className:"h-4 w-4"})}),error:!!Y.formState.errors.currentPassword,helperText:null===(d=Y.formState.errors.currentPassword)||void 0===d?void 0:d.message,...Y.register("currentPassword")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"newPassword",className:"form-label",children:"New password"}),(0,r.jsx)(m.I,{id:"newPassword",type:F?"text":"password",placeholder:"Enter new password",startIcon:(0,r.jsx)(w.Z,{className:"h-4 w-4"}),endIcon:(0,r.jsx)("button",{type:"button",onClick:()=>_(!F),className:"text-neutral-400 hover:text-neutral-600",children:F?(0,r.jsx)(f.Z,{className:"h-4 w-4"}):(0,r.jsx)(N.Z,{className:"h-4 w-4"})}),error:!!Y.formState.errors.newPassword,helperText:null===(v=Y.formState.errors.newPassword)||void 0===v?void 0:v.message,...Y.register("newPassword")}),H&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Password strength:"}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"h-1 w-1/4 rounded ".concat(H.length>=8?"bg-green-500":"bg-gray-300")}),(0,r.jsx)("div",{className:"h-1 w-1/4 rounded ".concat(/(?=.*[a-z])/.test(H)?"bg-green-500":"bg-gray-300")}),(0,r.jsx)("div",{className:"h-1 w-1/4 rounded ".concat(/(?=.*[A-Z])/.test(H)?"bg-green-500":"bg-gray-300")}),(0,r.jsx)("div",{className:"h-1 w-1/4 rounded ".concat(/(?=.*\d)/.test(H)?"bg-green-500":"bg-gray-300")})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm new password"}),(0,r.jsx)(m.I,{id:"confirmPassword",type:k?"text":"password",placeholder:"Confirm new password",startIcon:(0,r.jsx)(w.Z,{className:"h-4 w-4"}),endIcon:(0,r.jsx)("button",{type:"button",onClick:()=>C(!k),className:"text-neutral-400 hover:text-neutral-600",children:k?(0,r.jsx)(f.Z,{className:"h-4 w-4"}):(0,r.jsx)(N.Z,{className:"h-4 w-4"})}),error:!!Y.formState.errors.confirmPassword,helperText:null===(y=Y.formState.errors.confirmPassword)||void 0===y?void 0:y.message,...Y.register("confirmPassword")})]}),O&&(0,r.jsx)("div",{className:"text-sm text-success-600 bg-success-50 border border-success-200 rounded-md p-3",children:O}),Y.formState.errors.root&&(0,r.jsx)("div",{className:"text-sm text-error-600 bg-error-50 border border-error-200 rounded-md p-3",children:Y.formState.errors.root.message}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(o.z,{type:"submit",loading:U,disabled:U,className:"w-full md:w-auto",children:[(0,r.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),U?"Updating...":"Update password"]})})]})})]}),(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{children:[(0,r.jsx)(x.ll,{children:"Account Information"}),(0,r.jsx)(x.SZ,{children:"Your account details and status"})]}),(0,r.jsx)(x.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"User ID"}),(0,r.jsx)("span",{className:"text-sm text-gray-900 font-mono",children:P.id})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Role"}),(0,r.jsx)("span",{className:"text-sm text-gray-900 capitalize",children:P.role})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Member since"}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:new Date(P.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Last updated"}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:new Date(P.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})})]})]})]}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})})}},function(e){e.O(0,[351,293,528,744],function(){return e(e.s=18011)}),_N_E=e.O()}]);