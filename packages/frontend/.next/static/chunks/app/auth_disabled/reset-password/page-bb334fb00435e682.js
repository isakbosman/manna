(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{23203:function(e,s,r){Promise.resolve().then(r.bind(r,58928))},58928:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return j}});var t=r(12101),a=r(70093),n=r(27142),l=r(24922),o=r(45078),c=r(77275),d=r(62864),i=r(70966),x=r(41944),m=r(24319),h=r(65246),u=r(74015),w=r(84346),p=r(51068);let g=d.Ry({password:d.Z_().min(8,"Password must be at least 8 characters").regex(/(?=.*[a-z])/,"Password must contain at least one lowercase letter").regex(/(?=.*[A-Z])/,"Password must contain at least one uppercase letter").regex(/(?=.*\d)/,"Password must contain at least one number"),confirmPassword:d.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function j(){var e,s;let[r,d]=a.useState(!1),[j,f]=a.useState(!1),[b,N]=a.useState(!1),[y,v]=a.useState(!1),[P,k]=a.useState(""),Z=(0,l.useRouter)(),S=(0,l.useSearchParams)().get("token"),{register:I,handleSubmit:R,formState:{errors:C},setError:_,watch:L}=(0,o.cI)({resolver:(0,c.F)(g)}),E=L("password");a.useEffect(()=>{S||k("Invalid or missing reset token. Please request a new password reset.")},[S]);let Y=async e=>{if(!S){k("Invalid or missing reset token.");return}N(!0);try{await i.iJ.resetPassword(S,e.password),v(!0),setTimeout(()=>{Z.push("/auth/login?message=Password reset successful! Please sign in with your new password.")},2e3)}catch(e){_("root",{message:e.message||"Failed to reset password. Please try again."})}finally{N(!1)}};return P?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsx)(h.Zb,{children:(0,t.jsxs)(h.aY,{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-error-100 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invalid Reset Link"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:P}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(n.default,{href:"/auth/forgot-password",children:(0,t.jsx)(x.z,{className:"w-full",children:"Request new reset link"})}),(0,t.jsx)(n.default,{href:"/auth/login",className:"block w-full text-center text-sm text-primary-600 hover:text-primary-500",children:"Back to sign in"})]})]})})})}):y?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsx)(h.Zb,{children:(0,t.jsxs)(h.aY,{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 rounded-full bg-success-100 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-success-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Password Reset Successfully!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Your password has been updated. You can now sign in with your new password."}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to login page..."})]})})})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto h-12 w-12 rounded bg-primary-600 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-xl",children:"M"})}),(0,t.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Reset your password"}),(0,t.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below"})]}),(0,t.jsxs)(h.Zb,{children:[(0,t.jsxs)(h.Ol,{children:[(0,t.jsx)(h.ll,{children:"Set new password"}),(0,t.jsx)(h.SZ,{children:"Choose a strong password for your account"})]}),(0,t.jsxs)(h.aY,{children:[(0,t.jsxs)("form",{onSubmit:R(Y),className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"form-label",children:"New password"}),(0,t.jsx)(m.I,{id:"password",type:r?"text":"password",placeholder:"Enter new password",startIcon:(0,t.jsx)(u.Z,{className:"h-4 w-4"}),endIcon:(0,t.jsx)("button",{type:"button",onClick:()=>d(!r),className:"text-neutral-400 hover:text-neutral-600",children:r?(0,t.jsx)(w.Z,{className:"h-4 w-4"}):(0,t.jsx)(p.Z,{className:"h-4 w-4"})}),error:!!C.password,helperText:null===(e=C.password)||void 0===e?void 0:e.message,...I("password")}),E&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Password strength:"}),(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"h-1 w-1/4 rounded ".concat(E.length>=8?"bg-green-500":"bg-gray-300")}),(0,t.jsx)("div",{className:"h-1 w-1/4 rounded ".concat(/(?=.*[a-z])/.test(E)?"bg-green-500":"bg-gray-300")}),(0,t.jsx)("div",{className:"h-1 w-1/4 rounded ".concat(/(?=.*[A-Z])/.test(E)?"bg-green-500":"bg-gray-300")}),(0,t.jsx)("div",{className:"h-1 w-1/4 rounded ".concat(/(?=.*\d)/.test(E)?"bg-green-500":"bg-gray-300")})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm new password"}),(0,t.jsx)(m.I,{id:"confirmPassword",type:j?"text":"password",placeholder:"Confirm your new password",startIcon:(0,t.jsx)(u.Z,{className:"h-4 w-4"}),endIcon:(0,t.jsx)("button",{type:"button",onClick:()=>f(!j),className:"text-neutral-400 hover:text-neutral-600",children:j?(0,t.jsx)(w.Z,{className:"h-4 w-4"}):(0,t.jsx)(p.Z,{className:"h-4 w-4"})}),error:!!C.confirmPassword,helperText:null===(s=C.confirmPassword)||void 0===s?void 0:s.message,...I("confirmPassword")})]}),C.root&&(0,t.jsx)("div",{className:"text-sm text-error-600 bg-error-50 border border-error-200 rounded-md p-3",children:C.root.message}),(0,t.jsx)(x.z,{type:"submit",className:"w-full",loading:b,disabled:b,children:b?"Resetting password...":"Reset password"})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)(n.default,{href:"/auth/login",className:"text-sm text-primary-600 hover:text-primary-500",children:"Remember your password? Sign in"})})]})]})]})})}}},function(e){e.O(0,[351,583,102,744],function(){return e(e.s=23203)}),_N_E=e.O()}]);