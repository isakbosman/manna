(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{27888:function(e,s,a){Promise.resolve().then(a.bind(a,88596))},88596:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var t=a(27573),i=a(7653),r=a(88146),l=a(81695),n=a(45118),c=a(50466),o=a(72196);let d=(0,a(2389).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var m=a(97066),x=a(61569),u=a(53512);function h(){let[e,s]=i.useState("verifying"),[a,h]=i.useState(""),[f,y]=i.useState(""),[g,p]=i.useState(!1),j=(0,l.useRouter)(),N=(0,l.useSearchParams)().get("token");i.useEffect(()=>{(async()=>{if(!N){s("error"),y("Invalid or missing verification token.");return}try{await n.iJ.verifyEmail(N),s("success"),setTimeout(()=>{j.push("/auth/login?message=Email verified successfully! You can now sign in.")},3e3)}catch(a){if(400===a.status&&"TOKEN_EXPIRED"===a.code){var e;s("expired"),h((null===(e=a.details)||void 0===e?void 0:e.email)||"")}else s("error"),y(a.message||"Failed to verify email. Please try again.")}})()},[N,j]);let b=async()=>{if(a){p(!0);try{await n.iJ.resendVerification(a),j.push("/auth/login?message=Verification email sent! Please check your inbox.")}catch(e){y(e.message||"Failed to resend verification email.")}finally{p(!1)}}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full",children:[(0,t.jsx)("div",{className:"text-center mb-8",children:(0,t.jsx)("div",{className:"mx-auto h-12 w-12 rounded bg-primary-600 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-xl",children:"M"})})}),(0,t.jsx)(o.Zb,{children:(()=>{switch(e){case"verifying":return(0,t.jsxs)(o.aY,{className:"p-8 text-center",children:[(0,t.jsx)(d,{className:"mx-auto mb-4 h-12 w-12 text-primary-600 animate-spin"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying your email..."}),(0,t.jsx)("p",{className:"text-gray-600",children:"Please wait while we verify your email address."})]});case"success":return(0,t.jsxs)(o.aY,{className:"p-8 text-center",children:[(0,t.jsx)(m.Z,{className:"mx-auto mb-4 h-12 w-12 text-success-600"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email verified successfully!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Your email has been verified. You can now sign in to your account."}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"Redirecting to login page..."}),(0,t.jsx)(r.default,{href:"/auth/login",children:(0,t.jsx)(c.z,{children:"Continue to login"})})]});case"expired":return(0,t.jsxs)(o.aY,{className:"p-8 text-center",children:[(0,t.jsx)(x.Z,{className:"mx-auto mb-4 h-12 w-12 text-warning-600"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification link expired"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"The verification link has expired. We can send you a new verification email."}),a&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Send to: ",(0,t.jsx)("span",{className:"font-medium",children:a})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(c.z,{onClick:b,loading:g,disabled:g||!a,className:"w-full",children:g?"Sending...":"Send new verification email"}),(0,t.jsx)(r.default,{href:"/auth/login",className:"block w-full text-center text-sm text-primary-600 hover:text-primary-500",children:"Back to login"})]}),f&&(0,t.jsx)("div",{className:"mt-4 text-sm text-error-600 bg-error-50 border border-error-200 rounded-md p-3",children:f})]});case"error":return(0,t.jsxs)(o.aY,{className:"p-8 text-center",children:[(0,t.jsx)(u.Z,{className:"mx-auto mb-4 h-12 w-12 text-error-600"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification failed"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:f||"We were unable to verify your email address."}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(r.default,{href:"/auth/forgot-password",children:(0,t.jsx)(c.z,{variant:"outline",className:"w-full",children:"Request new verification"})}),(0,t.jsx)(r.default,{href:"/auth/login",className:"block w-full text-center text-sm text-primary-600 hover:text-primary-500",children:"Back to login"})]})]});default:return null}})()})]})})}}},function(e){e.O(0,[351,293,528,744],function(){return e(e.s=27888)}),_N_E=e.O()}]);