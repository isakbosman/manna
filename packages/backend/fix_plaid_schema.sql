-- Fix for Plaid sync schema issues\n-- Generated by fix_sync_schema.py\n\nALTER TABLE plaid_items ADD COLUMN last_sync_attempt TIMESTAMP WITH TIME ZONE;\nALTER TABLE plaid_items ADD COLUMN status VARCHAR(20) DEFAULT 'active' NOT NULL;\nALTER TABLE plaid_items ADD COLUMN error_code VARCHAR(50);\nALTER TABLE plaid_items ADD COLUMN error_message TEXT;\nALTER TABLE plaid_items ADD COLUMN requires_reauth BOOLEAN DEFAULT false;\nCREATE INDEX IF NOT EXISTS idx_plaid_items_sync_status ON plaid_items(status, last_sync_attempt);\nCREATE INDEX IF NOT EXISTS idx_plaid_items_cursor ON plaid_items(cursor) WHERE cursor IS NOT NULL;\nCREATE INDEX IF NOT EXISTS idx_plaid_items_reauth ON plaid_items(requires_reauth, is_active);\nALTER TABLE plaid_items ADD CONSTRAINT ck_plaid_item_status CHECK (status IN ('active', 'error', 'expired', 'revoked', 'pending'));\n